{"version":"2.0","models":[{"Key":"6","Name":"Cognipoint","Definition":{"version":"v2","readme":"Triggers whenever there is a change in Cognipoint occupancy sensor readings in a given area.\n\nTo setup this trigger, you need to register your Pointgrab account details.\n\nEnter your client id and secret when registering your account. Once you do so - Lucy will immediately subscribe to changes and start receiving them.\n\nLucy monitors for changes in occupancy to a given area and triggres an event when there is a change.\n\nLucy also reports values if they haven't changed for more than an hour.","attributes":[],"flows":{"blocks":[{"title":"Get Sites","type":"callwebservice:Cognipoint:Get Sites","id":"c7767e57-075b-4cc9-aa21-8b31f404a18c","position":{"left":980,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"b11192c3-0519-46ff-8268-13137d9b1a95:output:Input 01","target":"c7767e57-075b-4cc9-aa21-8b31f404a18c:input:trigger"}],"outputs":[{"source":"c7767e57-075b-4cc9-aa21-8b31f404a18c:output:sites","target":"e063fbdf-fe3b-46bc-c5ef-d7037e199d78:input:list"},{"source":"c7767e57-075b-4cc9-aa21-8b31f404a18c:output:sites","target":"00d0cb26-cc7a-46a2-a4d1-b8c5f5a0dcd1:input:sites"}]},"inputValues":[{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"sites","type":"","label":"sites","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Now","type":"objectaction:System:Now","id":"92bab34d-8af1-4ac1-fd79-99b1e89272ab","position":{"left":912,"top":97},"surface":"Receive","connections":{"inputs":[],"outputs":[{"source":"92bab34d-8af1-4ac1-fd79-99b1e89272ab:output:output","target":"9f33c606-30de-4b49-f5cf-d5f65981cb3b:input:timestamp"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"Get Areas","type":"callwebservice:Cognipoint:Get Areas","id":"b0735e96-d6be-4c43-94b8-aff2993520df","position":{"left":3146,"top":42},"surface":"SyncLocations","connections":{"inputs":[{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:buildingId","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Building"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:siteId","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Site"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:id","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Floor"}],"outputs":[{"source":"b0735e96-d6be-4c43-94b8-aff2993520df:output:areas","target":"9019a6f4-f316-481b-c2a5-0db58088bfa3:input:areas"}]},"inputValues":[{"id":"Building","type":"","label":"Building","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Site","type":"","label":"Site","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Floor","type":"","label":"Floor","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"areas","type":"","label":"Areas","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"CallAction","type":"callaction","id":"d0500cfb-bd70-4c71-9571-6f8c2361c78b","position":{"left":219,"top":404},"surface":"RegisterAndStart","connections":{"inputs":[{"source":"cf835fe4-d7ad-42f5-9f42-6b781cd5c95c:output:output","target":"d0500cfb-bd70-4c71-9571-6f8c2361c78b:input:trigger"}],"outputs":[{"source":"d0500cfb-bd70-4c71-9571-6f8c2361c78b:output:output","target":"32d03f15-a977-4a99-9cd7-6df5f9812d71:input:trigger"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeleteAllSubscriptions","modelName":"#{modelname}"},{"title":"Template","type":"template","id":"fbf35332-769c-4e13-d1d1-1bce911939ee","position":{"left":1011.0000381469727,"top":57},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:output:id","target":"fbf35332-769c-4e13-d1d1-1bce911939ee:input:area"}],"outputs":[{"source":"fbf35332-769c-4e13-d1d1-1bce911939ee:output:output","target":"9da5bee9-9fd4-4993-e01f-64ad6fac8c4a:input:name"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"area","type":"","label":"area","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":"","example":"","dataType":""}],"template":"pointgrab-cp/#{area}"},{"title":"Action","type":"linkedactionstart","id":"b11192c3-0519-46ff-8268-13137d9b1a95","position":{"left":760,"top":320},"surface":"SyncLocations","connections":{"inputs":[{"source":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:output:output","target":"b11192c3-0519-46ff-8268-13137d9b1a95:input:__actionlink__"}],"outputs":[{"source":"b11192c3-0519-46ff-8268-13137d9b1a95:output:Input 01","target":"c7767e57-075b-4cc9-aa21-8b31f404a18c:input:trigger"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"Input 01","type":"","label":"Input 01","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":false,"roles":[],"static":true},{"title":"Exists","type":"exists","id":"29347387-4dc7-49ab-a6db-88789d5ae1f7","position":{"left":320,"top":100},"surface":"GetFloors","connections":{"inputs":[{"source":"fce61756-32dc-42c7-bfe4-02c389ce46b0:output:building","target":"29347387-4dc7-49ab-a6db-88789d5ae1f7:input:input1"}],"outputs":[{"source":"29347387-4dc7-49ab-a6db-88789d5ae1f7:output:false","target":"d3102e1a-4e9b-461c-d851-a6e806c0b92f:input:trigger"},{"source":"29347387-4dc7-49ab-a6db-88789d5ae1f7:output:true","target":"58624cc2-4f2b-4c97-8271-eb5fe1005403:input:building"}]},"inputValues":[{"id":"input1","type":"","label":"Input 1","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"true","type":"","label":"True","description":"","documentation":"","example":"","dataType":""},{"id":"false","type":"","label":"False","description":"","documentation":"","example":"","dataType":""}]},{"title":"Equals","type":"equals","id":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f","position":{"left":518,"top":518},"surface":"Receive","connections":{"inputs":[{"source":"0a36b7c3-5def-423b-a105-39cc76adaa7e:output:value","target":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:input:input1"},{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:count","target":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:input:input2"}],"outputs":[{"source":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:output:false","target":"6056b618-f8a9-481e-d94e-2ed3d56bf553:input:trigger"}]},"inputValues":[{"id":"input1","type":"","label":"Input 1","value":"","description":"","documentation":"","transformation":"int","disablelog":""},{"id":"input2","type":"","label":"Input 2","value":"","description":"","documentation":"","transformation":"int","disablelog":""}],"outputValues":[{"id":"true","type":"","label":"True","description":"","documentation":"","example":"","dataType":""},{"id":"false","type":"","label":"False","description":"","documentation":"","example":"","dataType":""}]},{"title":"Action","type":"linkedactionstart","id":"5ee01984-0232-4efc-d133-9bd9851f1fae","position":{"left":2080,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"1299f734-9316-41b0-f4e3-03a3aa498459:output:action","target":"5ee01984-0232-4efc-d133-9bd9851f1fae:input:__actionlink__"}],"outputs":[{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:siteId","target":"db4ad881-fd91-496d-8e38-353d3c5d09ce:input:Site"},{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:id","target":"db4ad881-fd91-496d-8e38-353d3c5d09ce:input:Building"},{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:Extra","target":"52fb1c42-52d9-4d8f-9f56-b259f730f385:input:input"},{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:name","target":"52fb1c42-52d9-4d8f-9f56-b259f730f385:input:value"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"siteId","type":"","label":"siteId","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"Extra","type":"","label":"Extra","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":false,"roles":[],"static":true},{"title":"Action","type":"linkedactionstart","id":"9c300e74-ef7c-4358-83c8-c499afef5623","position":{"left":760,"top":100},"surface":"DeleteAllSubscriptions","connections":{"inputs":[{"source":"f7de10be-4da3-4764-b583-979d8e2631e1:output:action","target":"9c300e74-ef7c-4358-83c8-c499afef5623:input:__actionlink__"}],"outputs":[{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:id","target":"6a81a019-21d4-410c-8d97-a984422f3744:input:id"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:account","target":"6a81a019-21d4-410c-8d97-a984422f3744:input:AccountName"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:id","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:id"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:account","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:AccountName"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"account","type":"","label":"account","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":true,"roles":[],"static":true},{"title":"Delete Subscription","type":"callwebservice:Cognipoint:Delete Subscription","id":"432bdc8d-b312-4512-ecb4-1adf9cafd4fd","position":{"left":540,"top":100},"surface":"Del","connections":{"inputs":[{"source":"c4c180ca-678e-4448-a135-fadb7612ddae:output:output","target":"432bdc8d-b312-4512-ecb4-1adf9cafd4fd:input:trigger"}],"outputs":[]},"inputValues":[{"id":"id","type":"","label":"id","value":"#{input.id}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"814bcee4-00aa-4866-b4f5-08ca63568ef2","position":{"left":325,"top":106},"surface":"GetSpaceMapping","connections":{"inputs":[{"source":"e744ab99-e52a-4c9f-cd17-0ff8415a3a2e:output:rooms","target":"814bcee4-00aa-4866-b4f5-08ca63568ef2:input:rooms"}],"outputs":[{"source":"814bcee4-00aa-4866-b4f5-08ca63568ef2:output:ids","target":"2a0fd092-d262-4fb0-9c65-d54ad2678c84:input:ids"},{"source":"814bcee4-00aa-4866-b4f5-08ca63568ef2:output:rooms","target":"000b714c-70f4-48f0-d2f3-664658fab613:input:rooms"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"rooms","type":"","label":"rooms","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"ids","type":"","label":"ids","description":"","documentation":"","example":"","dataType":""},{"id":"rooms","type":"","label":"rooms","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {rooms} = runtime.inputs()\r\n\r\nlet ids = [] \r\nrooms.map(r => { ids.push(r.id)})\r\n\r\nruntime.done({rooms, ids})","timeoutMilliseconds":5000},{"title":"ES6Javascript","type":"es6javascript","id":"5222a4cd-f45e-4238-9f11-67dfae68e866","position":{"left":765,"top":383.0000114440918},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"116845e5-ffe8-4623-a7ec-08214a49c4a8:output:output","target":"5222a4cd-f45e-4238-9f11-67dfae68e866:input:data"}],"outputs":[{"source":"5222a4cd-f45e-4238-9f11-67dfae68e866:output:formatted","target":"2afba96d-92cf-434f-8005-d40e0e9849df:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"data","type":"","label":"data","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"formatted","type":"","label":"formatted","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {data} = runtime.inputs()\r\n\r\nlet formatted = data.map(d => {\r\n    d.value = Number(d.value)\r\n    return d\r\n})\r\n\r\nruntime.done({formatted: formatted})","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"77418b13-c97d-4892-8a77-ead8951d3fdf","position":{"left":11,"top":221},"surface":"Trend","connections":{"inputs":[],"outputs":[{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:start","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:from"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:end","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:to"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:bucket","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:bucket"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:Room","target":"12ffc39a-932f-476d-c026-c6dfc7429f96:input:room"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"Room","type":"","label":"Room","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""},{"id":"bucket","type":"","label":"bucket","description":"","documentation":"","example":"","dataType":""}],"actionName":"Trend","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"linkedactionstart","id":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f","position":{"left":2740,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:output:action","target":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:input:__actionlink__"}],"outputs":[{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:Extra","target":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:input:input"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:name","target":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:input:value"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:buildingId","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Building"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:siteId","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Site"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:id","target":"b0735e96-d6be-4c43-94b8-aff2993520df:input:Floor"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"buildingId","type":"","label":"buildingId","description":"","documentation":"","example":"","dataType":""},{"id":"siteId","type":"","label":"siteId","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"Extra","type":"","label":"Extra","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":true,"roles":[],"static":true},{"title":"CallAction","type":"callaction","id":"48c78189-b127-47ee-e3ec-e55327b47020","position":{"left":315,"top":115.00000381469727},"surface":"TrendByMasterName","connections":{"inputs":[{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:Room","target":"48c78189-b127-47ee-e3ec-e55327b47020:input:name"}],"outputs":[{"source":"48c78189-b127-47ee-e3ec-e55327b47020:output:id","target":"649081c1-46ae-4216-884f-5a228610dcd6:input:roomId"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"source","type":"","label":"source","value":"cognipoint","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""}],"actionName":"LookUpByMasterName","modelName":"#{model.spaceMappingProvider}"},{"title":"Get Floors","type":"callwebservice:Cognipoint:Get Floors","id":"db4ad881-fd91-496d-8e38-353d3c5d09ce","position":{"left":2300,"top":320},"surface":"SyncLocations","connections":{"inputs":[{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:siteId","target":"db4ad881-fd91-496d-8e38-353d3c5d09ce:input:Site"},{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:id","target":"db4ad881-fd91-496d-8e38-353d3c5d09ce:input:Building"}],"outputs":[{"source":"db4ad881-fd91-496d-8e38-353d3c5d09ce:output:floors","target":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:input:list"},{"source":"db4ad881-fd91-496d-8e38-353d3c5d09ce:output:floors","target":"0193f379-6a94-475d-e54b-2aaaa7dfb850:input:floors"}]},"inputValues":[{"id":"Building","type":"","label":"Building","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Site","type":"","label":"Site","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"floors","type":"","label":"Floors","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"CallAction","type":"callaction","id":"9dfb2365-af20-428a-daa7-036c3e76b933","position":{"left":772,"top":280.00000381469727},"surface":"TrendByMasterName","connections":{"inputs":[{"source":"649081c1-46ae-4216-884f-5a228610dcd6:output:name","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:Room"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:start","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:start"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:end","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:end"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:bucket","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:bucket"}],"outputs":[{"source":"9dfb2365-af20-428a-daa7-036c3e76b933:output:output","target":"d3b0b787-f4c5-4059-f809-b25dcf0074ad:input:input"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Room","type":"","label":"Room","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"start","type":"","label":"start","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"end","type":"","label":"end","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"bucket","type":"","label":"bucket","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"Trend","modelName":"Cognipoint"},{"title":"Fire Event","type":"fireevent","id":"9f33c606-30de-4b49-f5cf-d5f65981cb3b","position":{"left":1204,"top":227},"surface":"Receive","connections":{"inputs":[{"source":"6056b618-f8a9-481e-d94e-2ed3d56bf553:output:output","target":"9f33c606-30de-4b49-f5cf-d5f65981cb3b:input:trigger"},{"source":"92bab34d-8af1-4ac1-fd79-99b1e89272ab:output:output","target":"9f33c606-30de-4b49-f5cf-d5f65981cb3b:input:timestamp"}],"outputs":[]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"timestamp","type":"","label":"timestamp","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"value","type":"","label":"value","value":"#{input.count}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"#{input.areaId}","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"eventID":"#{modelname}/trend-event"},{"title":"Output","type":"actionoutput","id":"04e2d92f-613e-4d62-84df-4772b8af259d","position":{"left":1443.9999771118164,"top":72},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"9da5bee9-9fd4-4993-e01f-64ad6fac8c4a:output:value","target":"04e2d92f-613e-4d62-84df-4772b8af259d:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"value"},{"title":"Repeat Action","type":"repeataction","id":"1299f734-9316-41b0-f4e3-03a3aa498459","position":{"left":1860,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"fc208856-4d31-4708-cf25-e47f7c77fb8a:output:buildings","target":"1299f734-9316-41b0-f4e3-03a3aa498459:input:list"},{"source":"78bdaa55-88fe-42e2-f740-684dc6a462aa:output:output","target":"1299f734-9316-41b0-f4e3-03a3aa498459:input:extra"}],"outputs":[{"source":"1299f734-9316-41b0-f4e3-03a3aa498459:output:action","target":"5ee01984-0232-4efc-d133-9bd9851f1fae:input:__actionlink__"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"Output","type":"actionoutput","id":"4b497d62-7197-40b5-cc87-225ac3b30950","position":{"left":760,"top":100},"surface":"GetSpaces","connections":{"inputs":[{"source":"0be444f3-d9a0-40f3-9cab-af9d156e35f2:output:spaces","target":"4b497d62-7197-40b5-cc87-225ac3b30950:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"spaces"},{"title":"Replace one document","type":"modelcollections:replaceone","id":"880c7b97-b604-4774-d499-fd88de2f7b8f","position":{"left":738,"top":561},"surface":"RegisterAndStart","connections":{"inputs":[{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:EndPoint","target":"880c7b97-b604-4774-d499-fd88de2f7b8f:input:endpoint"},{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:id","target":"880c7b97-b604-4774-d499-fd88de2f7b8f:input:id"}],"outputs":[]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"account","type":"","label":"account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"endpoint","type":"","label":"endpoint","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"__data__","type":"text","label":"Data","value":"","description":"Data to be inserted","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"1f2f6925-8525-4a55-cf73-4d249ea5cbe7","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"account\",\"Operator\":\"eq\",\"Value\":\"account\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":true,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"1f11412d-7baf-42b0-afad-1fc0bcebf76f","position":{"left":134,"top":151},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[],"outputs":[{"source":"1f11412d-7baf-42b0-afad-1fc0bcebf76f:output:floor","target":"f4faad65-321d-4dbc-a8a4-bde86aadca1a:input:floorId"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floor","type":"","label":"floor","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetCurrentOccupancyForFloor","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"ES6Javascript","type":"es6javascript","id":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2","position":{"left":321,"top":100},"surface":"GetHistoricalOccupancyForFloor","connections":{"inputs":[{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:floor","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:floor"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:bucket","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:bucket"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:end","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:end"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:start","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:start"}],"outputs":[{"source":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:output:data","target":"be7a8ade-1f14-43ff-ef3d-79e7f0d0c243:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"floor","type":"","label":"floor","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"start","type":"","label":"start","value":"","description":"","documentation":"","transformation":"datetime","disablelog":""},{"id":"end","type":"","label":"end","value":"","description":"","documentation":"","transformation":"datetime","disablelog":""},{"id":"bucket","type":"","label":"bucket","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"data","type":"","label":"data","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let floor = runtime.inputs().floor;\nlet trends = lucy.trends();\nlet start = runtime.inputs().start;\nlet end = runtime.inputs().end;\nlet bucket = runtime.inputs().bucket;\nlet aggregate = 'max';\nif (bucket == 'month' || bucket == 'week') aggregate='max';\nfunction average(items) {\n    if (items.length==0) return 0;\n    let sum = 0;\n    for(var i in items) {\n        sum += items[i];\n    }\n    return Math.ceil(sum/items.length);\n}\nasync function doit() {\n    let areaValues = {};\n\n    let c = lucy.currentModel().collections();\n    let areas = await c.findMany(\"locations\",{floorId:floor},{});\n    for(var a in areas) {\n        let area = areas[a];\n        \n        let id = area.id;\n        let trend = 'occupancy/' + id;\n        let values= await trends.queryPoints(trend,start,end,{},bucket,aggregate,{});\n        lucy.log(values);\n        for(var vi in values) {\n            let value = values[vi];\n            if (!areaValues[id]) areaValues[id] = [];\n            let oval = Number(value.Value);\n            if (oval) {\n                areaValues[id].push(Number(value.Value));\n            }\n        }\n    }\n    let finalAreas = [];\n    let ids = Object.keys(areaValues);\n    for(var i in ids) {\n        finalAreas.push({id:ids[i],value:average(areaValues[ids[i]])});\n    }\n    return finalAreas;\n\n}\ndoit().then(data => runtime.done({data})).catch(e => runtime.error(e));","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"bd3a466a-81f5-43f0-cf4f-303c2936d518","position":{"left":100,"top":100},"surface":"GetSpaces","connections":{"inputs":[],"outputs":[{"source":"bd3a466a-81f5-43f0-cf4f-303c2936d518:output:floor","target":"a08b5e8b-38c3-412e-d74b-a490fea69270:input:floor"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floor","type":"","label":"floor","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetSpaces","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"ES6Javascript","type":"es6javascript","id":"51f39efd-6624-4ef8-e449-679a79a846e4","position":{"left":978.9999847412109,"top":215},"surface":"GetFloors","connections":{"inputs":[{"source":"58624cc2-4f2b-4c97-8271-eb5fe1005403:output:output","target":"51f39efd-6624-4ef8-e449-679a79a846e4:input:data"}],"outputs":[{"source":"51f39efd-6624-4ef8-e449-679a79a846e4:output:floors","target":"d9411b0d-5aac-4cd3-a31b-03c07ef5ed22:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"data","type":"","label":"data","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floors","type":"","label":"floors","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let { data } = runtime.inputs()\r\n\r\nlet floors = data.map(f => {\r\n    let t = {\r\n        id: f.id,\r\n        name: f.name,\r\n        layout: {\r\n            floorPlan: f.floorPlanURL,\r\n            width: f.widthDistance,\r\n            height: f.lengthDistance\r\n        }\r\n    }\r\n    return t\r\n})\r\n\r\nruntime.done({ floors })","timeoutMilliseconds":5000},{"title":"Stop Subscription","type":"callwebservice:Cognipoint:Stop Subscription","id":"c4c180ca-678e-4448-a135-fadb7612ddae","position":{"left":320,"top":100},"surface":"Del","connections":{"inputs":[{"source":"3e052d5a-66f8-4037-e2d7-78c3eb4f4cd3:output:id","target":"c4c180ca-678e-4448-a135-fadb7612ddae:input:id"}],"outputs":[{"source":"c4c180ca-678e-4448-a135-fadb7612ddae:output:output","target":"432bdc8d-b312-4512-ecb4-1adf9cafd4fd:input:trigger"}]},"inputValues":[{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Find all documents","type":"modelcollections:findall","id":"a08b5e8b-38c3-412e-d74b-a490fea69270","position":{"left":320.0000123977661,"top":100},"surface":"GetSpaces","connections":{"inputs":[{"source":"bd3a466a-81f5-43f0-cf4f-303c2936d518:output:floor","target":"a08b5e8b-38c3-412e-d74b-a490fea69270:input:floor"}],"outputs":[{"source":"a08b5e8b-38c3-412e-d74b-a490fea69270:output:output","target":"0be444f3-d9a0-40f3-9cab-af9d156e35f2:input:rooms"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"floor","type":"","label":"floor","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"floorId\",\"Operator\":\"eq\",\"Value\":\"floor\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"aa0dafe4-c79c-4270-90e0-67525441c891","position":{"left":606,"top":110.00000762939453},"surface":"SyncSites","connections":{"inputs":[{"source":"9d989214-dabb-405c-dd40-61b3f568e1e4:output:output","target":"aa0dafe4-c79c-4270-90e0-67525441c891:input:trigger"},{"source":"3df02932-6e0f-457b-d073-e7f73923daa7:output:sites","target":"aa0dafe4-c79c-4270-90e0-67525441c891:input:sites"}],"outputs":[{"source":"aa0dafe4-c79c-4270-90e0-67525441c891:output:sites","target":"7b8c786d-fc0d-464f-dba1-20ab01627fff:input:__data__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"sites","type":"","label":"sites","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"sites","type":"","label":"sites","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let inputs = runtime.inputs()\r\nlet sites = inputs.sites\r\n\r\nlet siteIds = []\r\nlet cleaned = sites.filter(s => {\r\n    if (siteIds.indexOf(s.id) == -1) {\r\n        siteIds.push(s.id)\r\n        return true\r\n    }\r\n})\r\n\r\nruntime.done({sites: cleaned})","timeoutMilliseconds":5000},{"title":"Register Subscription","type":"callwebservice:Cognipoint:Register Subscription","id":"32d03f15-a977-4a99-9cd7-6df5f9812d71","position":{"left":431,"top":115},"surface":"RegisterAndStart","connections":{"inputs":[{"source":"d0500cfb-bd70-4c71-9571-6f8c2361c78b:output:output","target":"32d03f15-a977-4a99-9cd7-6df5f9812d71:input:trigger"}],"outputs":[{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:id","target":"1c5726ed-baad-4e5d-84ab-098d5e7fafb0:input:id"},{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:EndPoint","target":"880c7b97-b604-4774-d499-fd88de2f7b8f:input:endpoint"},{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:id","target":"880c7b97-b604-4774-d499-fd88de2f7b8f:input:id"}]},"inputValues":[{"id":"WebHookPath","type":"","label":"Web Hook Path","value":"#{modelname}/receive","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"EndPoint","type":"","label":"EndPoint","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"be7a8ade-1f14-43ff-ef3d-79e7f0d0c243","position":{"left":540,"top":100},"surface":"GetHistoricalOccupancyForFloor","connections":{"inputs":[{"source":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:output:data","target":"be7a8ade-1f14-43ff-ef3d-79e7f0d0c243:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"occupancy"},{"title":"ES6Javascript","type":"es6javascript","id":"000b714c-70f4-48f0-d2f3-664658fab613","position":{"left":761,"top":106},"surface":"GetSpaceMapping","connections":{"inputs":[{"source":"814bcee4-00aa-4866-b4f5-08ca63568ef2:output:rooms","target":"000b714c-70f4-48f0-d2f3-664658fab613:input:rooms"},{"source":"2a0fd092-d262-4fb0-9c65-d54ad2678c84:output:spaces","target":"000b714c-70f4-48f0-d2f3-664658fab613:input:mappings"}],"outputs":[{"source":"000b714c-70f4-48f0-d2f3-664658fab613:output:rooms","target":"37b2e387-aeda-4fa9-f72d-d2f426b4c63d:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"mappings","type":"","label":"mappings","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"rooms","type":"","label":"rooms","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"rooms","type":"","label":"rooms","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let { rooms, mappings } = runtime.inputs()\r\n\r\n// filter romms with mapping \r\nlet updated = rooms.map(r => {\r\n    // get mapping \r\n    let mapping = mappings.find(m => m[\"cognipoint\"] == r.id)\r\n\r\n    if (mapping) {\r\n        let t = {\r\n            id: r.id,\r\n            name: r.name,\r\n            masterName: mapping.name,\r\n            capacity: mapping.capacity,\r\n            site: r.site,\r\n            siteId: r.siteId,\r\n            building: r.buildingId,\r\n            floor: r.floorId,\r\n            coordinates: r.positions.map(p => {\r\n                return {x: p.posX, y: p.posY}\r\n            })\r\n        }\r\n\r\n        return t\r\n    }\r\n})\r\n\r\nlet cleaned = updated.filter(r => r != undefined)\r\n\r\nruntime.done({ rooms: cleaned })\r\n\r\n","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"e744ab99-e52a-4c9f-cd17-0ff8415a3a2e","position":{"left":79,"top":114},"surface":"GetSpaceMapping","connections":{"inputs":[],"outputs":[{"source":"e744ab99-e52a-4c9f-cd17-0ff8415a3a2e:output:rooms","target":"814bcee4-00aa-4866-b4f5-08ca63568ef2:input:rooms"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"rooms","type":"","label":"rooms","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetSpaceMapping","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"actionstart","id":"23d0980b-e3dc-4ee6-a228-d82036bf60d2","position":{"left":100,"top":100},"surface":"DeleteAllSubscriptions","connections":{"inputs":[],"outputs":[{"source":"23d0980b-e3dc-4ee6-a228-d82036bf60d2:output:output","target":"ad647384-852c-420d-e1be-ef242e3c98b3:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeleteAllSubscriptions","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Find one document","type":"modelcollections:findone","id":"d3102e1a-4e9b-461c-d851-a6e806c0b92f","position":{"left":502.99998664855957,"top":247},"surface":"GetFloors","connections":{"inputs":[{"source":"29347387-4dc7-49ab-a6db-88789d5ae1f7:output:false","target":"d3102e1a-4e9b-461c-d851-a6e806c0b92f:input:trigger"}],"outputs":[{"source":"d3102e1a-4e9b-461c-d851-a6e806c0b92f:output:id","target":"58624cc2-4f2b-4c97-8271-eb5fe1005403:input:building"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"siteId","type":"","label":"siteId","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"Entire result","documentation":"","example":"","dataType":""}],"CollectionName":"9a620061-91d6-4a51-d120-4db8b304f9ce","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":true,"TakeFilterFromPin":false,"timeout":5000},{"title":"Merge Data","type":"mergedata","id":"78bdaa55-88fe-42e2-f740-684dc6a462aa","position":{"left":1640,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"0ed94b02-a132-43c6-d371-7d3406723021:output:name","target":"78bdaa55-88fe-42e2-f740-684dc6a462aa:input:value"}],"outputs":[{"source":"78bdaa55-88fe-42e2-f740-684dc6a462aa:output:output","target":"1299f734-9316-41b0-f4e3-03a3aa498459:input:extra"}]},"inputValues":[{"id":"input","type":"","label":"Input","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"key","type":"","label":"Name","value":"site","description":"","documentation":"","transformation":"","disablelog":""},{"id":"value","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"CallAction","type":"callaction","id":"00d0cb26-cc7a-46a2-a4d1-b8c5f5a0dcd1","position":{"left":1196.0000305175781,"top":335},"surface":"SyncLocations","connections":{"inputs":[{"source":"c7767e57-075b-4cc9-aa21-8b31f404a18c:output:sites","target":"00d0cb26-cc7a-46a2-a4d1-b8c5f5a0dcd1:input:sites"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"sites","type":"","label":"sites","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncSites","modelName":"Cognipoint"},{"title":"Action","type":"actionstart","id":"3e052d5a-66f8-4037-e2d7-78c3eb4f4cd3","position":{"left":100,"top":100},"surface":"Del","connections":{"inputs":[],"outputs":[{"source":"3e052d5a-66f8-4037-e2d7-78c3eb4f4cd3:output:id","target":"c4c180ca-678e-4448-a135-fadb7612ddae:input:id"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""}],"actionName":"Del","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Delete Subscription","type":"callwebservice:Cognipoint:Delete Subscription","id":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20","position":{"left":1233,"top":238},"surface":"DeleteAllSubscriptions","connections":{"inputs":[{"source":"6a81a019-21d4-410c-8d97-a984422f3744:output:output","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:trigger"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:id","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:id"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:account","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:AccountName"}],"outputs":[]},"inputValues":[{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"4db82722-9beb-4c81-abe8-dc384a964290","position":{"left":1200,"top":100},"surface":"Trend","connections":{"inputs":[{"source":"7861570c-31f1-4255-d629-ea719c661b52:output:data","target":"4db82722-9beb-4c81-abe8-dc384a964290:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"CallAction","type":"callaction","id":"0193f379-6a94-475d-e54b-2aaaa7dfb850","position":{"left":2581.0000610351562,"top":434.0000114440918},"surface":"SyncLocations","connections":{"inputs":[{"source":"db4ad881-fd91-496d-8e38-353d3c5d09ce:output:floors","target":"0193f379-6a94-475d-e54b-2aaaa7dfb850:input:floors"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"floors","type":"","label":"floors","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncFloors","modelName":"Cognipoint"},{"title":"CallAction","type":"callaction","id":"2b007ba8-16f7-4095-b782-b53ffbc5281b","position":{"left":1923,"top":413.0000123977661},"surface":"SyncLocations","connections":{"inputs":[{"source":"fc208856-4d31-4708-cf25-e47f7c77fb8a:output:buildings","target":"2b007ba8-16f7-4095-b782-b53ffbc5281b:input:buildings"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"buildings","type":"","label":"buildings","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncBuildings","modelName":"Cognipoint"},{"title":"Template","type":"template","id":"8a856b17-b665-4d92-f498-b2c8fc4fcbfc","position":{"left":173.00000762939453,"top":712},"surface":"Receive","connections":{"inputs":[{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:areaId","target":"8a856b17-b665-4d92-f498-b2c8fc4fcbfc:input:area"}],"outputs":[{"source":"8a856b17-b665-4d92-f498-b2c8fc4fcbfc:output:output","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:trend"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"area","type":"","label":"area","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":"","example":"","dataType":""}],"template":"occupancy/#{area}"},{"title":"Repeat Action","type":"repeataction","id":"e063fbdf-fe3b-46bc-c5ef-d7037e199d78","position":{"left":1200,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"c7767e57-075b-4cc9-aa21-8b31f404a18c:output:sites","target":"e063fbdf-fe3b-46bc-c5ef-d7037e199d78:input:list"}],"outputs":[{"source":"e063fbdf-fe3b-46bc-c5ef-d7037e199d78:output:action","target":"0ed94b02-a132-43c6-d371-7d3406723021:input:__actionlink__"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"Delete all document","type":"modelcollections:deleteall","id":"be385b0c-1d2b-414b-eab7-a38f13796740","position":{"left":320,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"c5a01c61-f2fd-4a12-a821-e11333268060:output:output","target":"be385b0c-1d2b-414b-eab7-a38f13796740:input:trigger"}],"outputs":[{"source":"be385b0c-1d2b-414b-eab7-a38f13796740:output:output","target":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:input:Input 01"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"9019a6f4-f316-481b-c2a5-0db58088bfa3","position":{"left":3556.0001831054688,"top":236.00000381469727},"surface":"SyncLocations","connections":{"inputs":[{"source":"b0735e96-d6be-4c43-94b8-aff2993520df:output:areas","target":"9019a6f4-f316-481b-c2a5-0db58088bfa3:input:areas"},{"source":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:output:output","target":"9019a6f4-f316-481b-c2a5-0db58088bfa3:input:locations"}],"outputs":[{"source":"9019a6f4-f316-481b-c2a5-0db58088bfa3:output:data","target":"a651b1dd-aea4-48c5-ff72-b95f60bb18d4:input:__data__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"areas","type":"","label":"areas","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"locations","type":"","label":"locations","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"data","type":"","label":"data","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {locations,areas} = runtime.inputs();\nfor(var r in areas) {\n    let room = areas[r];\n    let bits = Object.keys(locations);\n    for(var b in bits) {\n        let loc = bits[b];\n        let locv = locations[loc];\n        room[loc] = locv;\n    }\n}\nruntime.done({data:areas});","timeoutMilliseconds":5000},{"title":"CallAction","type":"callaction","id":"2a0fd092-d262-4fb0-9c65-d54ad2678c84","position":{"left":541,"top":106},"surface":"GetSpaceMapping","connections":{"inputs":[{"source":"814bcee4-00aa-4866-b4f5-08ca63568ef2:output:ids","target":"2a0fd092-d262-4fb0-9c65-d54ad2678c84:input:ids"}],"outputs":[{"source":"2a0fd092-d262-4fb0-9c65-d54ad2678c84:output:spaces","target":"000b714c-70f4-48f0-d2f3-664658fab613:input:mappings"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"system","type":"","label":"system","value":"cognipoint","description":"","documentation":"","transformation":"","disablelog":""},{"id":"ids","type":"","label":"ids","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"spaces","type":"","label":"spaces","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetMappingSpaces","modelName":"#{model.spaceMappingProvider}"},{"title":"Delete all document","type":"modelcollections:deleteall","id":"cf66e059-c5fe-4a3b-aba8-200ee62e2c7f","position":{"left":322,"top":46},"surface":"SyncFloors","connections":{"inputs":[{"source":"5ade403f-c09a-4edd-d48a-e191ed72ec5f:output:output","target":"cf66e059-c5fe-4a3b-aba8-200ee62e2c7f:input:trigger"}],"outputs":[{"source":"cf66e059-c5fe-4a3b-aba8-200ee62e2c7f:output:output","target":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"013405f4-126d-4613-b689-37a4868ffb69","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Get Value","type":"getfromredis","id":"0a36b7c3-5def-423b-a105-39cc76adaa7e","position":{"left":517,"top":231},"surface":"Receive","connections":{"inputs":[{"source":"22173944-c0c8-4baf-8f47-25f738859ec8:output:output","target":"0a36b7c3-5def-423b-a105-39cc76adaa7e:input:name"}],"outputs":[{"source":"0a36b7c3-5def-423b-a105-39cc76adaa7e:output:value","target":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:input:input1"}]},"inputValues":[{"id":"name","type":"","label":"Key","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"value","type":"","label":"Value","description":"","documentation":"","example":"","dataType":""}]},{"title":"ES6Javascript","type":"es6javascript","id":"f32ec7cb-5d24-459b-e125-09491dbc5ede","position":{"left":570,"top":145},"surface":"GetAllLocations","connections":{"inputs":[{"source":"96a55bb3-ffca-4b25-946c-d1c8f8fa5326:output:output","target":"f32ec7cb-5d24-459b-e125-09491dbc5ede:input:data"}],"outputs":[{"source":"f32ec7cb-5d24-459b-e125-09491dbc5ede:output:data","target":"f65fa9d3-0792-4edd-a45f-17d3ca03b4dd:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"data","type":"","label":"data","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"data","type":"","label":"data","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {data} = runtime.inputs();\nlet output = [];\nfor(var space of data) {\n    output.push({\n        name:space.name,\n        id: space.id\n    });\n}\nruntime.done({data:output});","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"fce61756-32dc-42c7-bfe4-02c389ce46b0","position":{"left":100,"top":100},"surface":"GetFloors","connections":{"inputs":[],"outputs":[{"source":"fce61756-32dc-42c7-bfe4-02c389ce46b0:output:building","target":"29347387-4dc7-49ab-a6db-88789d5ae1f7:input:input1"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"building","type":"","label":"building","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetFloors","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"actionstart","id":"4ff177dd-e056-4f41-91e6-8f006eaa5f71","position":{"left":11,"top":206},"surface":"Receive","connections":{"inputs":[],"outputs":[{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:areaId","target":"22173944-c0c8-4baf-8f47-25f738859ec8:input:area"},{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:count","target":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:input:input2"},{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:areaId","target":"8a856b17-b665-4d92-f498-b2c8fc4fcbfc:input:area"},{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:count","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:value"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"areaId","type":"","label":"areaId","description":"","documentation":"","example":"","dataType":""},{"id":"count","type":"","label":"count","description":"","documentation":"","example":"","dataType":""}],"actionName":"Receive","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Delete all document","type":"modelcollections:deleteall","id":"9d989214-dabb-405c-dd40-61b3f568e1e4","position":{"left":298,"top":68},"surface":"SyncSites","connections":{"inputs":[{"source":"3df02932-6e0f-457b-d073-e7f73923daa7:output:output","target":"9d989214-dabb-405c-dd40-61b3f568e1e4:input:trigger"}],"outputs":[{"source":"9d989214-dabb-405c-dd40-61b3f568e1e4:output:output","target":"aa0dafe4-c79c-4270-90e0-67525441c891:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"036bd020-e913-40bb-e382-2bc1d596299d","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Now","type":"objectaction:System:Now","id":"e11e80f9-1576-4fd9-a9c9-6a82953be3da","position":{"left":370,"top":820},"surface":"Receive","connections":{"inputs":[],"outputs":[{"source":"e11e80f9-1576-4fd9-a9c9-6a82953be3da:output:output","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:timestamp"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"ES6Javascript","type":"es6javascript","id":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac","position":{"left":513,"top":237},"surface":"SyncBuildings","connections":{"inputs":[{"source":"23f60d69-f326-4110-a029-0077fff38e01:output:output","target":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:input:trigger"},{"source":"4ceff905-ed35-49d7-dc67-c05ea52938f6:output:buildings","target":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:input:buildings"}],"outputs":[{"source":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:output:buildings","target":"3f6523ff-7f8b-482d-a7d5-bf9a3da3c853:input:__data__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"buildings","type":"","label":"buildings","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"buildings","type":"","label":"buildings","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let inputs = runtime.inputs()\r\nlet buildings = inputs.buildings\r\n\r\nlet buildingIds = []\r\nlet cleaned = buildings.filter(s => {\r\n    if (buildingIds.indexOf(s.id) == -1) {\r\n        buildingIds.push(s.id)\r\n        return true\r\n    }\r\n})\r\n\r\nruntime.done({buildings: cleaned})","timeoutMilliseconds":5000},{"title":"Action","type":"linkedactionstart","id":"0ed94b02-a132-43c6-d371-7d3406723021","position":{"left":1420,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"e063fbdf-fe3b-46bc-c5ef-d7037e199d78:output:action","target":"0ed94b02-a132-43c6-d371-7d3406723021:input:__actionlink__"}],"outputs":[{"source":"0ed94b02-a132-43c6-d371-7d3406723021:output:id","target":"fc208856-4d31-4708-cf25-e47f7c77fb8a:input:Site"},{"source":"0ed94b02-a132-43c6-d371-7d3406723021:output:name","target":"78bdaa55-88fe-42e2-f740-684dc6a462aa:input:value"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":true,"roles":[],"static":true},{"title":"Find all documents","type":"modelcollections:findall","id":"ad647384-852c-420d-e1be-ef242e3c98b3","position":{"left":320,"top":100},"surface":"DeleteAllSubscriptions","connections":{"inputs":[{"source":"23d0980b-e3dc-4ee6-a228-d82036bf60d2:output:output","target":"ad647384-852c-420d-e1be-ef242e3c98b3:input:trigger"}],"outputs":[{"source":"ad647384-852c-420d-e1be-ef242e3c98b3:output:output","target":"f7de10be-4da3-4764-b583-979d8e2631e1:input:list"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"1f2f6925-8525-4a55-cf73-4d249ea5cbe7","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"7861570c-31f1-4255-d629-ea719c661b52","position":{"left":980,"top":100},"surface":"Trend","connections":{"inputs":[{"source":"883d83c3-aa3e-4d62-d810-f63891211fa6:output:output","target":"7861570c-31f1-4255-d629-ea719c661b52:input:data"}],"outputs":[{"source":"7861570c-31f1-4255-d629-ea719c661b52:output:data","target":"4db82722-9beb-4c81-abe8-dc384a964290:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"data","type":"","label":"data","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"data","type":"","label":"data","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"runtime.done({data:runtime.inputs().data});","timeoutMilliseconds":5000},{"title":"Repeat Action","type":"repeataction","id":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5","position":{"left":2520,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"52fb1c42-52d9-4d8f-9f56-b259f730f385:output:output","target":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:input:extra"},{"source":"db4ad881-fd91-496d-8e38-353d3c5d09ce:output:floors","target":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:input:list"}],"outputs":[{"source":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:output:action","target":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:input:__actionlink__"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"Repeat Action","type":"repeataction","id":"116845e5-ffe8-4623-a7ec-08214a49c4a8","position":{"left":574.0000381469727,"top":151},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"f4faad65-321d-4dbc-a8a4-bde86aadca1a:output:output","target":"116845e5-ffe8-4623-a7ec-08214a49c4a8:input:list"}],"outputs":[{"source":"116845e5-ffe8-4623-a7ec-08214a49c4a8:output:action","target":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:input:__actionlink__"},{"source":"116845e5-ffe8-4623-a7ec-08214a49c4a8:output:output","target":"5222a4cd-f45e-4238-9f11-67dfae68e866:input:data"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"Start Subscription","type":"callwebservice:Cognipoint:Start Subscription","id":"1c5726ed-baad-4e5d-84ab-098d5e7fafb0","position":{"left":858,"top":253},"surface":"RegisterAndStart","connections":{"inputs":[{"source":"32d03f15-a977-4a99-9cd7-6df5f9812d71:output:id","target":"1c5726ed-baad-4e5d-84ab-098d5e7fafb0:input:id"}],"outputs":[]},"inputValues":[{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Queue","type":"queue","id":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f","position":{"left":540,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"be385b0c-1d2b-414b-eab7-a38f13796740:output:output","target":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:input:Input 01"}],"outputs":[{"source":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:output:output","target":"b11192c3-0519-46ff-8268-13137d9b1a95:input:__actionlink__"},{"source":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:output:failed","target":"afb412ed-ac0f-45c5-e798-c48aee8bdbc6:input:__actionlink__"}]},"inputValues":[{"id":"Input 01","type":"","label":"Input 01","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"actionlink","label":"Output","description":"","documentation":"","example":"","dataType":""},{"id":"failed","type":"actionlink","label":"Failed","description":"","documentation":"","example":"","dataType":""},{"id":"queueid","type":"","label":"Queue Id","description":"","documentation":"","example":"","dataType":""}],"queue-name":"pointgrab-locations","retry-count":3,"retry-immediately":false,"retry-in":5,"multiple-actors":false,"actor-count":1},{"title":"Action","type":"actionstart","id":"3df02932-6e0f-457b-d073-e7f73923daa7","position":{"left":52,"top":113},"surface":"SyncSites","connections":{"inputs":[],"outputs":[{"source":"3df02932-6e0f-457b-d073-e7f73923daa7:output:output","target":"9d989214-dabb-405c-dd40-61b3f568e1e4:input:trigger"},{"source":"3df02932-6e0f-457b-d073-e7f73923daa7:output:sites","target":"aa0dafe4-c79c-4270-90e0-67525441c891:input:sites"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"sites","type":"","label":"sites","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncSites","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Find all documents","type":"modelcollections:findall","id":"f4faad65-321d-4dbc-a8a4-bde86aadca1a","position":{"left":354.00000762939453,"top":151},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"1f11412d-7baf-42b0-afad-1fc0bcebf76f:output:floor","target":"f4faad65-321d-4dbc-a8a4-bde86aadca1a:input:floorId"}],"outputs":[{"source":"f4faad65-321d-4dbc-a8a4-bde86aadca1a:output:output","target":"116845e5-ffe8-4623-a7ec-08214a49c4a8:input:list"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"floorId","type":"","label":"floorId","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"floorId\",\"Operator\":\"eq\",\"Value\":\"floorId\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Output","type":"actionoutput","id":"f65fa9d3-0792-4edd-a45f-17d3ca03b4dd","position":{"left":828,"top":128},"surface":"GetAllLocations","connections":{"inputs":[{"source":"f32ec7cb-5d24-459b-e125-09491dbc5ede:output:data","target":"f65fa9d3-0792-4edd-a45f-17d3ca03b4dd:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"locations"},{"title":"Add Point","type":"timeseriesaddpoint","id":"78c2dc6c-cdbb-4906-8c37-343e77ff5596","position":{"left":685.0000267028809,"top":704},"surface":"Receive","connections":{"inputs":[{"source":"8a856b17-b665-4d92-f498-b2c8fc4fcbfc:output:output","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:trend"},{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:count","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:value"},{"source":"e11e80f9-1576-4fd9-a9c9-6a82953be3da:output:output","target":"78c2dc6c-cdbb-4906-8c37-343e77ff5596:input:timestamp"}],"outputs":[]},"inputValues":[{"id":"trend","type":"","label":"Trend Name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"value","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"timestamp","type":"","label":"Timestamp","value":"","description":"","documentation":"","transformation":"datetime","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}]},{"title":"Merge Data","type":"mergedata","id":"52fb1c42-52d9-4d8f-9f56-b259f730f385","position":{"left":2300,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:Extra","target":"52fb1c42-52d9-4d8f-9f56-b259f730f385:input:input"},{"source":"5ee01984-0232-4efc-d133-9bd9851f1fae:output:name","target":"52fb1c42-52d9-4d8f-9f56-b259f730f385:input:value"}],"outputs":[{"source":"52fb1c42-52d9-4d8f-9f56-b259f730f385:output:output","target":"1546cdf1-b54d-4900-cca0-0a0b44e4c5e5:input:extra"}]},"inputValues":[{"id":"input","type":"","label":"Input","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"key","type":"","label":"Name","value":"building","description":"","documentation":"","transformation":"","disablelog":""},{"id":"value","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"CallAction","type":"callaction","id":"0be444f3-d9a0-40f3-9cab-af9d156e35f2","position":{"left":540,"top":100},"surface":"GetSpaces","connections":{"inputs":[{"source":"a08b5e8b-38c3-412e-d74b-a490fea69270:output:output","target":"0be444f3-d9a0-40f3-9cab-af9d156e35f2:input:rooms"}],"outputs":[{"source":"0be444f3-d9a0-40f3-9cab-af9d156e35f2:output:spaces","target":"4b497d62-7197-40b5-cc87-225ac3b30950:input:input"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"rooms","type":"","label":"rooms","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"spaces","type":"","label":"spaces","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetSpaceMapping","modelName":"Cognipoint"},{"title":"Action","type":"actionstart","id":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a","position":{"left":59,"top":261.00000381469727},"surface":"TrendByMasterName","connections":{"inputs":[],"outputs":[{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:Room","target":"48c78189-b127-47ee-e3ec-e55327b47020:input:name"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:start","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:start"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:end","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:end"},{"source":"9cb23847-b8b3-4ce2-fad5-498d9eb4386a:output:bucket","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:bucket"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"Room","type":"","label":"Room","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""},{"id":"bucket","type":"","label":"bucket","description":"","documentation":"","example":"","dataType":""}],"actionName":"TrendByMasterName","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"d9411b0d-5aac-4cd3-a31b-03c07ef5ed22","position":{"left":1193.0000457763672,"top":86},"surface":"GetFloors","connections":{"inputs":[{"source":"51f39efd-6624-4ef8-e449-679a79a846e4:output:floors","target":"d9411b0d-5aac-4cd3-a31b-03c07ef5ed22:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"floors"},{"title":"Find one document","type":"modelcollections:findone","id":"649081c1-46ae-4216-884f-5a228610dcd6","position":{"left":542,"top":33.999996185302734},"surface":"TrendByMasterName","connections":{"inputs":[{"source":"48c78189-b127-47ee-e3ec-e55327b47020:output:id","target":"649081c1-46ae-4216-884f-5a228610dcd6:input:roomId"}],"outputs":[{"source":"649081c1-46ae-4216-884f-5a228610dcd6:output:name","target":"9dfb2365-af20-428a-daa7-036c3e76b933:input:Room"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"roomId","type":"","label":"roomId","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"site","type":"","label":"site","description":"","documentation":"","example":"","dataType":""},{"id":"siteId","type":"","label":"siteId","description":"","documentation":"","example":"","dataType":""},{"id":"building","type":"","label":"building","description":"","documentation":"","example":"","dataType":""},{"id":"buildingId","type":"","label":"buildingId","description":"","documentation":"","example":"","dataType":""},{"id":"floor","type":"","label":"floor","description":"","documentation":"","example":"","dataType":""},{"id":"floorId","type":"","label":"floorId","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"Entire result","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"id\",\"Operator\":\"eq\",\"Value\":\"roomId\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":true,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"linkedactionstart","id":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0","position":{"left":793.0000381469727,"top":75},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"116845e5-ffe8-4623-a7ec-08214a49c4a8:output:action","target":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:input:__actionlink__"}],"outputs":[{"source":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:output:id","target":"a27bcbf9-cdfe-46a8-de01-c863fdf3ce8b:input:input"},{"source":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:output:id","target":"fbf35332-769c-4e13-d1d1-1bce911939ee:input:area"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":true,"roles":[],"static":true},{"title":"Delete all document","type":"modelcollections:deleteall","id":"23f60d69-f326-4110-a029-0077fff38e01","position":{"left":313,"top":71},"surface":"SyncBuildings","connections":{"inputs":[{"source":"4ceff905-ed35-49d7-dc67-c05ea52938f6:output:output","target":"23f60d69-f326-4110-a029-0077fff38e01:input:trigger"}],"outputs":[{"source":"23f60d69-f326-4110-a029-0077fff38e01:output:output","target":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"9a620061-91d6-4a51-d120-4db8b304f9ce","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Get Value","type":"getfromredis","id":"9da5bee9-9fd4-4993-e01f-64ad6fac8c4a","position":{"left":1228.9999771118164,"top":58},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"fbf35332-769c-4e13-d1d1-1bce911939ee:output:output","target":"9da5bee9-9fd4-4993-e01f-64ad6fac8c4a:input:name"}],"outputs":[{"source":"9da5bee9-9fd4-4993-e01f-64ad6fac8c4a:output:value","target":"04e2d92f-613e-4d62-84df-4772b8af259d:input:input"}]},"inputValues":[{"id":"name","type":"","label":"Key","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"value","type":"","label":"Value","description":"","documentation":"","example":"","dataType":""}]},{"title":"Action","type":"actionstart","id":"cf835fe4-d7ad-42f5-9f42-6b781cd5c95c","position":{"left":60,"top":60},"surface":"RegisterAndStart","connections":{"inputs":[],"outputs":[{"source":"cf835fe4-d7ad-42f5-9f42-6b781cd5c95c:output:output","target":"d0500cfb-bd70-4c71-9571-6f8c2361c78b:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"RegisterAndStart","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Template","type":"template","id":"a052e70a-b9e6-4d84-b011-97f302de6510","position":{"left":540,"top":86.99999809265137},"surface":"Trend","connections":{"inputs":[{"source":"12ffc39a-932f-476d-c026-c6dfc7429f96:output:id","target":"a052e70a-b9e6-4d84-b011-97f302de6510:input:area"}],"outputs":[{"source":"a052e70a-b9e6-4d84-b011-97f302de6510:output:output","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:trend"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"area","type":"","label":"area","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":"","example":"","dataType":""}],"template":"occupancy/#{area}"},{"title":"Find all documents","type":"modelcollections:findall","id":"58624cc2-4f2b-4c97-8271-eb5fe1005403","position":{"left":727.9999866485596,"top":71},"surface":"GetFloors","connections":{"inputs":[{"source":"29347387-4dc7-49ab-a6db-88789d5ae1f7:output:true","target":"58624cc2-4f2b-4c97-8271-eb5fe1005403:input:building"},{"source":"d3102e1a-4e9b-461c-d851-a6e806c0b92f:output:id","target":"58624cc2-4f2b-4c97-8271-eb5fe1005403:input:building"}],"outputs":[{"source":"58624cc2-4f2b-4c97-8271-eb5fe1005403:output:output","target":"51f39efd-6624-4ef8-e449-679a79a846e4:input:data"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"building","type":"","label":"building","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"013405f4-126d-4613-b689-37a4868ffb69","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"buildingId\",\"Operator\":\"eq\",\"Value\":\"building\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Output","type":"actionoutput","id":"ed4f5cdd-c76a-4378-eae9-6fbecfc4b67c","position":{"left":760,"top":100},"surface":"GetAllSpaces","connections":{"inputs":[{"source":"906f749e-6fe3-40e0-8feb-f4b12701116b:output:spaces","target":"ed4f5cdd-c76a-4378-eae9-6fbecfc4b67c:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"spaces"},{"title":"Action","type":"linkedactionstart","id":"afb412ed-ac0f-45c5-e798-c48aee8bdbc6","position":{"left":760,"top":100},"surface":"SyncLocations","connections":{"inputs":[{"source":"8bf812ee-0cc7-41f0-e6f0-b4ac83f7b71f:output:failed","target":"afb412ed-ac0f-45c5-e798-c48aee8bdbc6:input:__actionlink__"}],"outputs":[]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"blockId","type":"","label":"Block ID","description":"","documentation":"","example":"","dataType":""},{"id":"queueId","type":"","label":"Queue ID","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":false,"roles":[],"static":true},{"title":"Get Buildings","type":"callwebservice:Cognipoint:Get Buildings","id":"fc208856-4d31-4708-cf25-e47f7c77fb8a","position":{"left":1640,"top":320},"surface":"SyncLocations","connections":{"inputs":[{"source":"0ed94b02-a132-43c6-d371-7d3406723021:output:id","target":"fc208856-4d31-4708-cf25-e47f7c77fb8a:input:Site"}],"outputs":[{"source":"fc208856-4d31-4708-cf25-e47f7c77fb8a:output:buildings","target":"1299f734-9316-41b0-f4e3-03a3aa498459:input:list"},{"source":"fc208856-4d31-4708-cf25-e47f7c77fb8a:output:buildings","target":"2b007ba8-16f7-4095-b782-b53ffbc5281b:input:buildings"}]},"inputValues":[{"id":"Site","type":"","label":"Site","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"#{model.cognipoint}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"buildings","type":"","label":"Buildings","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Query Points","type":"timeseriesquerypoints","id":"883d83c3-aa3e-4d62-d810-f63891211fa6","position":{"left":776,"top":226},"surface":"Trend","connections":{"inputs":[{"source":"a052e70a-b9e6-4d84-b011-97f302de6510:output:output","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:trend"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:start","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:from"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:end","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:to"},{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:bucket","target":"883d83c3-aa3e-4d62-d810-f63891211fa6:input:bucket"}],"outputs":[{"source":"883d83c3-aa3e-4d62-d810-f63891211fa6:output:output","target":"7861570c-31f1-4255-d629-ea719c661b52:input:data"}]},"inputValues":[{"id":"trend","type":"","label":"Trend Name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"bucket","type":"","label":"Bucket Type","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"aggregation","type":"","label":"Aggregation Type","value":"max","description":"","documentation":"","transformation":"","disablelog":""},{"id":"from","type":"","label":"From","value":"","description":"","documentation":"","transformation":"datetime","disablelog":""},{"id":"to","type":"","label":"To","value":"","description":"","documentation":"","transformation":"datetime","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"limit","type":"","label":"Limit","value":"4000","description":"","documentation":"","transformation":"","disablelog":""},{"id":"offset","type":"","label":"Offset","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"descending","type":"","label":"Descending","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"2afba96d-92cf-434f-8005-d40e0e9849df","position":{"left":1235.0000305175781,"top":378.0000114440918},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"5222a4cd-f45e-4238-9f11-67dfae68e866:output:formatted","target":"2afba96d-92cf-434f-8005-d40e0e9849df:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"occupancy"},{"title":"Action","type":"actionstart","id":"3bbf3c99-7797-4b1d-cb61-ef16e2700cc4","position":{"left":100,"top":100},"surface":"GetAllSpaces","connections":{"inputs":[],"outputs":[{"source":"3bbf3c99-7797-4b1d-cb61-ef16e2700cc4:output:output","target":"e258f256-a072-475e-fb3e-2629ec97266b:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetAllSpaces","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Template","type":"template","id":"22173944-c0c8-4baf-8f47-25f738859ec8","position":{"left":378,"top":20},"surface":"Receive","connections":{"inputs":[{"source":"4ff177dd-e056-4f41-91e6-8f006eaa5f71:output:areaId","target":"22173944-c0c8-4baf-8f47-25f738859ec8:input:area"}],"outputs":[{"source":"22173944-c0c8-4baf-8f47-25f738859ec8:output:output","target":"0a36b7c3-5def-423b-a105-39cc76adaa7e:input:name"},{"source":"22173944-c0c8-4baf-8f47-25f738859ec8:output:output","target":"6056b618-f8a9-481e-d94e-2ed3d56bf553:input:name"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"area","type":"","label":"area","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":"","example":"","dataType":""}],"template":"pointgrab-cp/#{area}"},{"title":"Find all documents","type":"modelcollections:findall","id":"96a55bb3-ffca-4b25-946c-d1c8f8fa5326","position":{"left":298,"top":96},"surface":"GetAllLocations","connections":{"inputs":[{"source":"ed93d2d9-c131-4e9c-e3ba-25927a463095:output:output","target":"96a55bb3-ffca-4b25-946c-d1c8f8fa5326:input:trigger"}],"outputs":[{"source":"96a55bb3-ffca-4b25-946c-d1c8f8fa5326:output:output","target":"f32ec7cb-5d24-459b-e125-09491dbc5ede:input:data"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Insert all documents","type":"modelcollections:insertall","id":"3f6523ff-7f8b-482d-a7d5-bf9a3da3c853","position":{"left":798,"top":54},"surface":"SyncBuildings","connections":{"inputs":[{"source":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:output:buildings","target":"3f6523ff-7f8b-482d-a7d5-bf9a3da3c853:input:__data__"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"9a620061-91d6-4a51-d120-4db8b304f9ce","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"Insert all documents","type":"modelcollections:insertall","id":"a651b1dd-aea4-48c5-ff72-b95f60bb18d4","position":{"left":3818,"top":118},"surface":"SyncLocations","connections":{"inputs":[{"source":"9019a6f4-f316-481b-c2a5-0db58088bfa3:output:data","target":"a651b1dd-aea4-48c5-ff72-b95f60bb18d4:input:__data__"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402","position":{"left":544,"top":228.99999237060547},"surface":"SyncFloors","connections":{"inputs":[{"source":"cf66e059-c5fe-4a3b-aba8-200ee62e2c7f:output:output","target":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:input:trigger"},{"source":"5ade403f-c09a-4edd-d48a-e191ed72ec5f:output:floors","target":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:input:floors"}],"outputs":[{"source":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:output:floors","target":"aec82f6b-f024-474c-d079-5c1e520434c3:input:__data__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"floors","type":"","label":"floors","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floors","type":"","label":"floors","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let inputs = runtime.inputs()\r\nlet floors = inputs.floors\r\n\r\nlet floorIds = []\r\nlet cleaned = floors.filter((f) => {\r\n    if(floorIds.indexOf(f.id) == -1) {\r\n        floorIds.push(f.id)\r\n        return true\r\n    }\r\n})\r\nruntime.done({floors: cleaned})\r\n\r\n","timeoutMilliseconds":5000},{"title":"Insert all documents","type":"modelcollections:insertall","id":"7b8c786d-fc0d-464f-dba1-20ab01627fff","position":{"left":830,"top":106},"surface":"SyncSites","connections":{"inputs":[{"source":"aa0dafe4-c79c-4270-90e0-67525441c891:output:sites","target":"7b8c786d-fc0d-464f-dba1-20ab01627fff:input:__data__"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"036bd020-e913-40bb-e382-2bc1d596299d","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"Repeat Action","type":"repeataction","id":"f7de10be-4da3-4764-b583-979d8e2631e1","position":{"left":540,"top":100},"surface":"DeleteAllSubscriptions","connections":{"inputs":[{"source":"ad647384-852c-420d-e1be-ef242e3c98b3:output:output","target":"f7de10be-4da3-4764-b583-979d8e2631e1:input:list"}],"outputs":[{"source":"f7de10be-4da3-4764-b583-979d8e2631e1:output:action","target":"9c300e74-ef7c-4358-83c8-c499afef5623:input:__actionlink__"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"Action","type":"actionstart","id":"ed93d2d9-c131-4e9c-e3ba-25927a463095","position":{"left":60,"top":114},"surface":"GetAllLocations","connections":{"inputs":[],"outputs":[{"source":"ed93d2d9-c131-4e9c-e3ba-25927a463095:output:output","target":"96a55bb3-ffca-4b25-946c-d1c8f8fa5326:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetAllLocations","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Insert all documents","type":"modelcollections:insertall","id":"aec82f6b-f024-474c-d079-5c1e520434c3","position":{"left":795,"top":232.99999237060547},"surface":"SyncFloors","connections":{"inputs":[{"source":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:output:floors","target":"aec82f6b-f024-474c-d079-5c1e520434c3:input:__data__"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"013405f4-126d-4613-b689-37a4868ffb69","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"Stop Subscription","type":"callwebservice:Cognipoint:Stop Subscription","id":"6a81a019-21d4-410c-8d97-a984422f3744","position":{"left":1002,"top":19},"surface":"DeleteAllSubscriptions","connections":{"inputs":[{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:id","target":"6a81a019-21d4-410c-8d97-a984422f3744:input:id"},{"source":"9c300e74-ef7c-4358-83c8-c499afef5623:output:account","target":"6a81a019-21d4-410c-8d97-a984422f3744:input:AccountName"}],"outputs":[{"source":"6a81a019-21d4-410c-8d97-a984422f3744:output:output","target":"c7d18d4e-10ad-493f-a1d7-8c06620b9b20:input:trigger"}]},"inputValues":[{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Set Value","type":"setinredis","id":"6056b618-f8a9-481e-d94e-2ed3d56bf553","position":{"left":944,"top":305},"surface":"Receive","connections":{"inputs":[{"source":"f94e0b19-2f39-4f08-f5f1-c4c9bd45613f:output:false","target":"6056b618-f8a9-481e-d94e-2ed3d56bf553:input:trigger"},{"source":"22173944-c0c8-4baf-8f47-25f738859ec8:output:output","target":"6056b618-f8a9-481e-d94e-2ed3d56bf553:input:name"}],"outputs":[{"source":"6056b618-f8a9-481e-d94e-2ed3d56bf553:output:output","target":"9f33c606-30de-4b49-f5cf-d5f65981cb3b:input:trigger"}]},"inputValues":[{"id":"name","type":"","label":"Key","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"input","type":"","label":"Value","value":"#{input.count}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"expirySeconds":"30"},{"title":"Output","type":"actionoutput","id":"a27bcbf9-cdfe-46a8-de01-c863fdf3ce8b","position":{"left":983.0000305175781,"top":232.0000114440918},"surface":"GetCurrentOccupancyForFloor","connections":{"inputs":[{"source":"5c3c3c68-42b8-4bde-96a5-c5f038cec0c0:output:id","target":"a27bcbf9-cdfe-46a8-de01-c863fdf3ce8b:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"id"},{"title":"Output","type":"actionoutput","id":"d3b0b787-f4c5-4059-f809-b25dcf0074ad","position":{"left":1005,"top":324.00000381469727},"surface":"TrendByMasterName","connections":{"inputs":[{"source":"9dfb2365-af20-428a-daa7-036c3e76b933:output:output","target":"d3b0b787-f4c5-4059-f809-b25dcf0074ad:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Find all documents","type":"modelcollections:findall","id":"e258f256-a072-475e-fb3e-2629ec97266b","position":{"left":320,"top":100},"surface":"GetAllSpaces","connections":{"inputs":[{"source":"3bbf3c99-7797-4b1d-cb61-ef16e2700cc4:output:output","target":"e258f256-a072-475e-fb3e-2629ec97266b:input:trigger"}],"outputs":[{"source":"e258f256-a072-475e-fb3e-2629ec97266b:output:output","target":"906f749e-6fe3-40e0-8feb-f4b12701116b:input:rooms"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"5ade403f-c09a-4edd-d48a-e191ed72ec5f","position":{"left":50,"top":206.00000762939453},"surface":"SyncFloors","connections":{"inputs":[],"outputs":[{"source":"5ade403f-c09a-4edd-d48a-e191ed72ec5f:output:output","target":"cf66e059-c5fe-4a3b-aba8-200ee62e2c7f:input:trigger"},{"source":"5ade403f-c09a-4edd-d48a-e191ed72ec5f:output:floors","target":"9319e6fe-d5ff-4c2e-9c97-fa932de1d402:input:floors"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floors","type":"","label":"floors","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncFloors","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"37b2e387-aeda-4fa9-f72d-d2f426b4c63d","position":{"left":981,"top":106},"surface":"GetSpaceMapping","connections":{"inputs":[{"source":"000b714c-70f4-48f0-d2f3-664658fab613:output:rooms","target":"37b2e387-aeda-4fa9-f72d-d2f426b4c63d:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"spaces"},{"title":"Action","type":"actionstart","id":"4ceff905-ed35-49d7-dc67-c05ea52938f6","position":{"left":32,"top":119},"surface":"SyncBuildings","connections":{"inputs":[],"outputs":[{"source":"4ceff905-ed35-49d7-dc67-c05ea52938f6:output:output","target":"23f60d69-f326-4110-a029-0077fff38e01:input:trigger"},{"source":"4ceff905-ed35-49d7-dc67-c05ea52938f6:output:buildings","target":"c1a96bfe-ddbb-4974-cc2e-1f5e15ecc9ac:input:buildings"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"buildings","type":"","label":"buildings","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncBuildings","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Find one document","type":"modelcollections:findone","id":"12ffc39a-932f-476d-c026-c6dfc7429f96","position":{"left":284,"top":7},"surface":"Trend","connections":{"inputs":[{"source":"77418b13-c97d-4892-8a77-ead8951d3fdf:output:Room","target":"12ffc39a-932f-476d-c026-c6dfc7429f96:input:room"}],"outputs":[{"source":"12ffc39a-932f-476d-c026-c6dfc7429f96:output:id","target":"a052e70a-b9e6-4d84-b011-97f302de6510:input:area"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"room","type":"","label":"room","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"site","type":"","label":"site","description":"","documentation":"","example":"","dataType":""},{"id":"building","type":"","label":"building","description":"","documentation":"","example":"","dataType":""},{"id":"floor","type":"","label":"floor","description":"","documentation":"","example":"","dataType":""},{"id":"floorId","type":"","label":"floorId","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"siteId","type":"","label":"siteId","description":"","documentation":"","example":"","dataType":""},{"id":"buildingId","type":"","label":"buildingId","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"Entire result","documentation":"","example":"","dataType":""}],"CollectionName":"284f4617-9e68-4e25-9893-998e50f21012","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"name\",\"Operator\":\"eq\",\"Value\":\"room\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":true,"TakeFilterFromPin":false,"timeout":5000},{"title":"Merge Data","type":"mergedata","id":"7b34c339-b55e-4311-ad4c-f8fbd31c2963","position":{"left":3181,"top":374},"surface":"SyncLocations","connections":{"inputs":[{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:Extra","target":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:input:input"},{"source":"63c3ca7c-7345-4b9f-a5be-4e2138957d0f:output:name","target":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:input:value"}],"outputs":[{"source":"7b34c339-b55e-4311-ad4c-f8fbd31c2963:output:output","target":"9019a6f4-f316-481b-c2a5-0db58088bfa3:input:locations"}]},"inputValues":[{"id":"input","type":"","label":"Input","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"key","type":"","label":"Name","value":"floor","description":"","documentation":"","transformation":"","disablelog":""},{"id":"value","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"Action","type":"actionstart","id":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c","position":{"left":100,"top":100},"surface":"GetHistoricalOccupancyForFloor","connections":{"inputs":[],"outputs":[{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:floor","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:floor"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:bucket","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:bucket"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:end","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:end"},{"source":"17b929ee-e6c7-4337-e7de-6e96cdb97b2c:output:start","target":"e9d8e031-cb31-44a1-b1df-3af7cf0240a2:input:start"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"floor","type":"","label":"floor","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""},{"id":"bucket","type":"","label":"bucket","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetHistoricalOccupancyForFloor","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"CallAction","type":"callaction","id":"906f749e-6fe3-40e0-8feb-f4b12701116b","position":{"left":540,"top":100},"surface":"GetAllSpaces","connections":{"inputs":[{"source":"e258f256-a072-475e-fb3e-2629ec97266b:output:output","target":"906f749e-6fe3-40e0-8feb-f4b12701116b:input:rooms"}],"outputs":[{"source":"906f749e-6fe3-40e0-8feb-f4b12701116b:output:spaces","target":"ed4f5cdd-c76a-4378-eae9-6fbecfc4b67c:input:input"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"rooms","type":"","label":"rooms","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"spaces","type":"","label":"spaces","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetSpaceMapping","modelName":"Cognipoint"},{"title":"Action","type":"actionstart","id":"c5a01c61-f2fd-4a12-a821-e11333268060","position":{"left":100,"top":100},"surface":"SyncLocations","connections":{"inputs":[],"outputs":[{"source":"c5a01c61-f2fd-4a12-a821-e11333268060:output:output","target":"be385b0c-1d2b-414b-eab7-a38f13796740:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"SyncLocations","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""}],"position":{"top":0,"left":0}},"sources":[{"name":"DeleteAllSubscriptions","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"Del","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["id"]},{"name":"Receive","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["areaId","count"]},{"name":"GetAllLocations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["locations"],"parameters":[]},{"name":"SyncBuildings","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["buildings"]},{"name":"GetHistoricalOccupancyForFloor","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["occupancy"],"parameters":["floor","start","end","bucket"]},{"name":"GetCurrentOccupancyForFloor","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id","value","occupancy"],"parameters":["floor"]},{"name":"GetAllSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":[]},{"name":"SyncFloors","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["floors"]},{"name":"GetFloors","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["floors"],"parameters":["building"]},{"name":"SyncSites","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["sites"]},{"name":"TrendByMasterName","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["Room","start","end","bucket"]},{"name":"RegisterAndStart","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"SyncLocations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"Trend","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["Room","start","end","bucket"]},{"name":"GetSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["floor"]},{"name":"GetSpaceMapping","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["rooms"]}],"actions":[{"name":"DeleteAllSubscriptions","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"Del","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["id"]},{"name":"Receive","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["areaId","count"]},{"name":"GetAllLocations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["locations"],"parameters":[]},{"name":"SyncBuildings","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["buildings"]},{"name":"GetHistoricalOccupancyForFloor","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["occupancy"],"parameters":["floor","start","end","bucket"]},{"name":"GetCurrentOccupancyForFloor","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id","value","occupancy"],"parameters":["floor"]},{"name":"GetAllSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":[]},{"name":"SyncFloors","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["floors"]},{"name":"GetFloors","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["floors"],"parameters":["building"]},{"name":"SyncSites","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["sites"]},{"name":"TrendByMasterName","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["Room","start","end","bucket"]},{"name":"RegisterAndStart","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"SyncLocations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"Trend","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["Room","start","end","bucket"]},{"name":"GetSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["floor"]},{"name":"GetSpaceMapping","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["rooms"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"parameters\":[{\"id\":\"cognipoint\",\"label\":\"Cognipoint Account\",\"type\":\"wsaccount\",\"subtype\":\"Cognipoint\"},{\"id\":\"spaceMappingProvider\",\"label\":\"Space Mapping Provider\",\"type\":\"model\",\"subtype\":\"space-mapping-provider\"}],\"tags\":[\"occupancy\",\"cognipoint\"],\"capabilities\":[\"trend-event,\",\"occupancy-provider\"],\"title\":\"Occupancy Sensor Values Change\",\"description\":\"Fires whenever there are changes in occupancy\",\"onSave\":\"RegisterAndStart\"}","Icon":"https://s3.amazonaws.com/ecyber.public/connector-icons/cognipoint.png","ApiRoutes":[{"Key":"179","MapKey":"6","Route":"receive","Method":"POST","BodyFormat":"JSON","QueryParams":"[]","IsActive":"0","Action":"Receive","NoAuth":"1"}],"JSModules":[],"ModelCollections":[{"Key":"1011","MapKey":"6","GUID":"1f2f6925-8525-4a55-cf73-4d249ea5cbe7","Attributes":"[{\"name\":\"account\"},{\"name\":\"id\"},{\"name\":\"endpoint\"}]","Name":"subscriptions"},{"Key":"1012","MapKey":"6","GUID":"284f4617-9e68-4e25-9893-998e50f21012","Attributes":"[{\"name\":\"id\"},{\"name\":\"name\"},{\"name\":\"site\"},{\"name\":\"siteId\"},{\"name\":\"building\"},{\"name\":\"buildingId\"},{\"name\":\"floor\"},{\"name\":\"floorId\"}]","Name":"locations"},{"Key":"1013","MapKey":"6","GUID":"013405f4-126d-4613-b689-37a4868ffb69","Attributes":"[{\"name\":\"id\"},{\"name\":\"buildingId\"},{\"name\":\"name\"},{\"name\":\"siteId\"},{\"name\":\"floorNumber\"},{\"name\":\"floorPlanURL\"},{\"name\":\"widthDistance\"},{\"name\":\"lengthDistance\"},{\"name\":\"maxPeopleCapacity\"},{\"name\":\"referencePoints\"},{\"name\":\"timestamp\"}]","Name":"floors"},{"Key":"1014","MapKey":"6","GUID":"9a620061-91d6-4a51-d120-4db8b304f9ce","Attributes":"[{\"name\":\"id\"},{\"name\":\"name\"},{\"name\":\"siteId\"}]","Name":"buildings"},{"Key":"1015","MapKey":"6","GUID":"036bd020-e913-40bb-e382-2bc1d596299d","Attributes":"[{\"name\":\"id\"},{\"name\":\"name\"}]","Name":"sites"}]}]}