{"version":"2.0","models":[{"Key":"14","Name":"SpaceMapping","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"ES6Javascript","type":"es6javascript","id":"98e80077-046f-411c-9536-83d71b39c9bd","position":{"left":361,"top":159},"surface":"LookUpByMasterName","connections":{"inputs":[{"source":"24a62153-f3fe-4828-8c04-e728294c994c:output:name","target":"98e80077-046f-411c-9536-83d71b39c9bd:input:name"},{"source":"24a62153-f3fe-4828-8c04-e728294c994c:output:source","target":"98e80077-046f-411c-9536-83d71b39c9bd:input:source"}],"outputs":[{"source":"98e80077-046f-411c-9536-83d71b39c9bd:output:id","target":"37641f15-68a0-4158-c86d-9ab5e65bea7e:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"source","type":"","label":"source","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {source, name} = runtime.inputs()\r\nlet collections = lucy.currentModel().collections()\r\n\r\nlet filters = {name: name}\r\n\r\ncollections.findMany(\"rooms\", filters, {})\r\n.then(res => {\r\n    runtime.done({id: res[0][source]})\r\n})\r\n.catch(e => {\r\n    runtime.error(e)\r\n})","timeoutMilliseconds":5000},{"title":"Output","type":"actionoutput","id":"37641f15-68a0-4158-c86d-9ab5e65bea7e","position":{"left":626,"top":185},"surface":"LookUpByMasterName","connections":{"inputs":[{"source":"98e80077-046f-411c-9536-83d71b39c9bd:output:id","target":"37641f15-68a0-4158-c86d-9ab5e65bea7e:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"id"},{"title":"CallAction","type":"callaction","id":"98193791-ef3a-4a57-e3d5-d092cc5c7330","position":{"left":321.0000114440918,"top":320},"surface":"GenerateMapping","connections":{"inputs":[{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:output","target":"98193791-ef3a-4a57-e3d5-d092cc5c7330:input:trigger"}],"outputs":[{"source":"98193791-ef3a-4a57-e3d5-d092cc5c7330:output:locations","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:mapTo"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"locations","type":"","label":"locations","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetAllLocations","modelName":"#{input.model}"},{"title":"Find all documents","type":"modelcollections:findall","id":"2ef31ed4-88a5-4435-85c2-ba6e7077c56d","position":{"left":328,"top":48},"surface":"GenerateMapping","connections":{"inputs":[{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:output","target":"2ef31ed4-88a5-4435-85c2-ba6e7077c56d:input:trigger"}],"outputs":[{"source":"2ef31ed4-88a5-4435-85c2-ba6e7077c56d:output:output","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:rooms"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Insert all documents","type":"modelcollections:insertall","id":"6263fc58-f73a-475f-f71a-f3f15382c89d","position":{"left":761,"top":100},"surface":"LoadMasterData","connections":{"inputs":[{"source":"276aac61-7794-4eb9-dabb-e53aff417001:output:locations","target":"6263fc58-f73a-475f-f71a-f3f15382c89d:input:__data__"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"CallAction","type":"callaction","id":"1f0b7d92-e526-44ea-f4f9-e07737041612","position":{"left":657.0000114440918,"top":192},"surface":"AddASource","connections":{"inputs":[{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:id","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:id"},{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:model","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:model"},{"source":"16800125-cca0-4033-fd9f-54e06fddacc6:output:output","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:trigger"}],"outputs":[{"source":"1f0b7d92-e526-44ea-f4f9-e07737041612:output:output","target":"b29174aa-a297-4003-9fa2-1933b5a70e53:input:input"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"model","type":"","label":"model","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"GenerateMapping","modelName":"LocationMapping"},{"title":"Delete all document","type":"modelcollections:deleteall","id":"a3e6a46b-e970-4dab-b26f-3b6552830eff","position":{"left":846,"top":12},"surface":"GenerateMapping","connections":{"inputs":[{"source":"cede0013-c8a8-47c0-a071-ee416b5f5954:output:rooms","target":"a3e6a46b-e970-4dab-b26f-3b6552830eff:input:trigger"}],"outputs":[{"source":"a3e6a46b-e970-4dab-b26f-3b6552830eff:output:output","target":"275ad9a2-1c80-489e-ad48-3717213e3312:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Insert one document","type":"modelcollections:insertone","id":"16800125-cca0-4033-fd9f-54e06fddacc6","position":{"left":373.0000114440918,"top":40},"surface":"AddASource","connections":{"inputs":[{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:id","target":"16800125-cca0-4033-fd9f-54e06fddacc6:input:id"},{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:model","target":"16800125-cca0-4033-fd9f-54e06fddacc6:input:model"}],"outputs":[{"source":"16800125-cca0-4033-fd9f-54e06fddacc6:output:output","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"model","type":"","label":"model","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"__data__","type":"text","label":"Data","value":"","description":"Data to be inserted","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"a30295b7-a46f-4f8b-9bc7-68c14beec48b","configuration":"[]","UpdateAsAttributes":true,"ReceiveIndividualFields":false,"timeout":5000},{"title":"CallAction","type":"callaction","id":"276aac61-7794-4eb9-dabb-e53aff417001","position":{"left":540,"top":100},"surface":"LoadMasterData","connections":{"inputs":[{"source":"901bd507-7ee4-4e3c-abcb-9517e57c6cb2:output:output","target":"276aac61-7794-4eb9-dabb-e53aff417001:input:trigger"}],"outputs":[{"source":"276aac61-7794-4eb9-dabb-e53aff417001:output:locations","target":"6263fc58-f73a-475f-f71a-f3f15382c89d:input:__data__"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"locations","type":"","label":"locations","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetAllLocations","modelName":"#{model.masterSource}"},{"title":"Action","type":"actionstart","id":"24a62153-f3fe-4828-8c04-e728294c994c","position":{"left":54,"top":118},"surface":"LookUpByMasterName","connections":{"inputs":[],"outputs":[{"source":"24a62153-f3fe-4828-8c04-e728294c994c:output:name","target":"98e80077-046f-411c-9536-83d71b39c9bd:input:name"},{"source":"24a62153-f3fe-4828-8c04-e728294c994c:output:source","target":"98e80077-046f-411c-9536-83d71b39c9bd:input:source"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"source","type":"","label":"source","description":"","documentation":"","example":"","dataType":""}],"actionName":"LookUpByMasterName","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"ES6Javascript","type":"es6javascript","id":"cede0013-c8a8-47c0-a071-ee416b5f5954","position":{"left":540,"top":101},"surface":"GenerateMapping","connections":{"inputs":[{"source":"2ef31ed4-88a5-4435-85c2-ba6e7077c56d:output:output","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:rooms"},{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:id","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:sourceId"},{"source":"98193791-ef3a-4a57-e3d5-d092cc5c7330:output:locations","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:mapTo"}],"outputs":[{"source":"cede0013-c8a8-47c0-a071-ee416b5f5954:output:rooms","target":"a3e6a46b-e970-4dab-b26f-3b6552830eff:input:trigger"},{"source":"cede0013-c8a8-47c0-a071-ee416b5f5954:output:rooms","target":"275ad9a2-1c80-489e-ad48-3717213e3312:input:__data__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"rooms","type":"","label":"rooms","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"mapTo","type":"","label":"mapTo","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"sourceId","type":"","label":"sourceId","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"rooms","type":"","label":"rooms","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let inputs = runtime.inputs()\r\nlet rooms = inputs.rooms\r\nlet mapTo = inputs.mapTo\r\nlet sourceId = inputs.sourceId\r\n\r\nlet collections = lucy.currentModel().collections();\r\n\r\n// assume name is the common \r\n// name is not the exact name for different sources\r\n// main - Room 1 - other sources it can be Room_1/Room1/room1/etc \r\n// this is just a sample mapping \r\n// a user  must confirm these \r\n\r\nlet regExp = /[^0-9a-z]/gi\r\n\r\nfunction formatName(name) {\r\n    return (name.replace(regExp, \"\").trim()).toLowerCase()\r\n}\r\n\r\nlet updated = rooms.map(r=> {\r\n    // find the room \r\n    r[sourceId] = null\r\n    let room = mapTo.find(mr => (formatName(r.name) == formatName(mr.name)))\r\n    if(room) {\r\n        r[sourceId] = room.id\r\n    }\r\n\r\n    return r\r\n})\r\n\r\nruntime.done({rooms: updated})\r\n","timeoutMilliseconds":5000},{"title":"Output","type":"actionoutput","id":"7192a507-0444-460e-f878-7a025e653842","position":{"left":750.0000366270542,"top":174},"surface":"GetMappingSpaces","connections":{"inputs":[{"source":"a3e8393c-651f-48f8-87f4-707759df8f1e:output:rooms","target":"7192a507-0444-460e-f878-7a025e653842:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"spaces"},{"title":"Action","type":"actionstart","id":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8","position":{"left":89,"top":128},"surface":"GenerateMapping","connections":{"inputs":[],"outputs":[{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:output","target":"98193791-ef3a-4a57-e3d5-d092cc5c7330:input:trigger"},{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:output","target":"2ef31ed4-88a5-4435-85c2-ba6e7077c56d:input:trigger"},{"source":"4be1df16-49ee-4f86-b8ea-7b289af6f3c8:output:id","target":"cede0013-c8a8-47c0-a071-ee416b5f5954:input:sourceId"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"model","type":"","label":"model","description":"","documentation":"","example":"","dataType":""}],"actionName":"GenerateMapping","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Insert all documents","type":"modelcollections:insertall","id":"275ad9a2-1c80-489e-ad48-3717213e3312","position":{"left":1080,"top":243},"surface":"GenerateMapping","connections":{"inputs":[{"source":"cede0013-c8a8-47c0-a071-ee416b5f5954:output:rooms","target":"275ad9a2-1c80-489e-ad48-3717213e3312:input:__data__"},{"source":"a3e6a46b-e970-4dab-b26f-3b6552830eff:output:output","target":"275ad9a2-1c80-489e-ad48-3717213e3312:input:trigger"}],"outputs":[]},"inputValues":[{"id":"__data__","type":"text","label":"Data","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"timeout":5000},{"title":"Output","type":"actionoutput","id":"ce5b5a57-2c12-4fac-91ba-786db0c491fb","position":{"left":540,"top":100},"surface":"DeleteAll","connections":{"inputs":[{"source":"5a21b87b-266f-4232-d6da-28161208c8f2:output:output","target":"ce5b5a57-2c12-4fac-91ba-786db0c491fb:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Output","type":"actionoutput","id":"b29174aa-a297-4003-9fa2-1933b5a70e53","position":{"left":942.0000114440918,"top":223},"surface":"AddASource","connections":{"inputs":[{"source":"1f0b7d92-e526-44ea-f4f9-e07737041612:output:output","target":"b29174aa-a297-4003-9fa2-1933b5a70e53:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"321e5d5e-90cf-4f74-b134-8c97c82443be","position":{"left":100,"top":100},"surface":"LoadMasterData","connections":{"inputs":[],"outputs":[{"source":"321e5d5e-90cf-4f74-b134-8c97c82443be:output:output","target":"901bd507-7ee4-4e3c-abcb-9517e57c6cb2:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"LoadMasterData","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"actionstart","id":"fd693398-a733-4a58-ef97-4e6758d188c3","position":{"left":100,"top":100},"surface":"DeleteAll","connections":{"inputs":[],"outputs":[{"source":"fd693398-a733-4a58-ef97-4e6758d188c3:output:output","target":"5a21b87b-266f-4232-d6da-28161208c8f2:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeleteAll","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Delete all document","type":"modelcollections:deleteall","id":"5a21b87b-266f-4232-d6da-28161208c8f2","position":{"left":320,"top":100},"surface":"DeleteAll","connections":{"inputs":[{"source":"fd693398-a733-4a58-ef97-4e6758d188c3:output:output","target":"5a21b87b-266f-4232-d6da-28161208c8f2:input:trigger"}],"outputs":[{"source":"5a21b87b-266f-4232-d6da-28161208c8f2:output:output","target":"ce5b5a57-2c12-4fac-91ba-786db0c491fb:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"28e2d13d-2ed9-450e-e63d-e1220ce3411d","position":{"left":112,"top":153},"surface":"GetMappingSpaces","connections":{"inputs":[],"outputs":[{"source":"28e2d13d-2ed9-450e-e63d-e1220ce3411d:output:system","target":"a3e8393c-651f-48f8-87f4-707759df8f1e:input:system"},{"source":"28e2d13d-2ed9-450e-e63d-e1220ce3411d:output:ids","target":"a3e8393c-651f-48f8-87f4-707759df8f1e:input:ids"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"system","type":"","label":"system","description":"","documentation":"","example":"","dataType":""},{"id":"ids","type":"","label":"ids","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetMappingSpaces","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Delete all document","type":"modelcollections:deleteall","id":"901bd507-7ee4-4e3c-abcb-9517e57c6cb2","position":{"left":320,"top":100},"surface":"LoadMasterData","connections":{"inputs":[{"source":"321e5d5e-90cf-4f74-b134-8c97c82443be:output:output","target":"901bd507-7ee4-4e3c-abcb-9517e57c6cb2:input:trigger"}],"outputs":[{"source":"901bd507-7ee4-4e3c-abcb-9517e57c6cb2:output:output","target":"276aac61-7794-4eb9-dabb-e53aff417001:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"b5275df6-95e8-4dad-c532-79f8dbb22142","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Output","type":"actionoutput","id":"e45172c0-ec70-4bb1-d440-21f534d124cf","position":{"left":540,"top":100},"surface":"Lookup","connections":{"inputs":[{"source":"5acf6069-b887-407c-f252-5409e5881f4f:output:target","target":"e45172c0-ec70-4bb1-d440-21f534d124cf:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"id"},{"title":"ES6Javascript","type":"es6javascript","id":"a3e8393c-651f-48f8-87f4-707759df8f1e","position":{"left":449.0000061094761,"top":131},"surface":"GetMappingSpaces","connections":{"inputs":[{"source":"28e2d13d-2ed9-450e-e63d-e1220ce3411d:output:system","target":"a3e8393c-651f-48f8-87f4-707759df8f1e:input:system"},{"source":"28e2d13d-2ed9-450e-e63d-e1220ce3411d:output:ids","target":"a3e8393c-651f-48f8-87f4-707759df8f1e:input:ids"}],"outputs":[{"source":"a3e8393c-651f-48f8-87f4-707759df8f1e:output:rooms","target":"7192a507-0444-460e-f878-7a025e653842:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"system","type":"","label":"system","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"ids","type":"","label":"ids","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"rooms","type":"","label":"rooms","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {system, ids} = runtime.inputs()\r\nlet collections = lucy.currentModel().collections()\r\n\r\nif(typeof ids == 'string') {\r\n    ids = ids.split(\",\")\r\n}\r\n\r\nlet filters = {[system]: {$in: ids }}\r\n\r\ncollections.findMany(\"rooms\", filters, {})\r\n.then(res => {\r\n    runtime.done({rooms: res})\r\n})\r\n.catch(e => {\r\n    runtime.error(e)\r\n})","timeoutMilliseconds":5000},{"title":"ES6Javascript","type":"es6javascript","id":"5acf6069-b887-407c-f252-5409e5881f4f","position":{"left":320,"top":100},"surface":"Lookup","connections":{"inputs":[{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:target","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:target"},{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:name","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:name"},{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:source","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:source"}],"outputs":[{"source":"5acf6069-b887-407c-f252-5409e5881f4f:output:target","target":"e45172c0-ec70-4bb1-d440-21f534d124cf:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"source","type":"","label":"source","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"target","type":"","label":"target","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"target","type":"","label":"target","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {source,name,target} = runtime.inputs();\nasync function main() {\n    let collections = lucy.currentModel().collections();\n    let item = await collections.findOne('rooms',{[source]:name},{});\n    if (!item) return null;\n    return item[target] || '';\n}\nmain().then(x => runtime.done({target:x})).catch(e => runtime.error(e));","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"ccfc3d8e-9b3e-447c-a616-c7c721b59461","position":{"left":100,"top":100},"surface":"Lookup","connections":{"inputs":[],"outputs":[{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:target","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:target"},{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:name","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:name"},{"source":"ccfc3d8e-9b3e-447c-a616-c7c721b59461:output:source","target":"5acf6069-b887-407c-f252-5409e5881f4f:input:source"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"source","type":"","label":"source","description":"","documentation":"","example":"","dataType":""},{"id":"name","type":"","label":"name","description":"","documentation":"","example":"","dataType":""},{"id":"target","type":"","label":"target","description":"","documentation":"","example":"","dataType":""}],"actionName":"Lookup","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"actionstart","id":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368","position":{"left":88.99999618530273,"top":161},"surface":"AddASource","connections":{"inputs":[],"outputs":[{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:id","target":"16800125-cca0-4033-fd9f-54e06fddacc6:input:id"},{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:model","target":"16800125-cca0-4033-fd9f-54e06fddacc6:input:model"},{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:id","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:id"},{"source":"fc89d03f-59ca-4bb9-ad6e-84b5bd88b368:output:model","target":"1f0b7d92-e526-44ea-f4f9-e07737041612:input:model"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"model","type":"","label":"model","description":"","documentation":"","example":"","dataType":""}],"actionName":"AddASource","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""}],"position":{"top":0,"left":0}},"sources":[{"name":"LoadMasterData","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"DeleteAll","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"GetMappingSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["system","ids"]},{"name":"GenerateMapping","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["id","model"]},{"name":"Lookup","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id"],"parameters":["source","name","target"]},{"name":"AddASource","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["id","model"]},{"name":"LookUpByMasterName","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id"],"parameters":["name","source"]}],"actions":[{"name":"LoadMasterData","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"DeleteAll","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"GetMappingSpaces","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["spaces"],"parameters":["system","ids"]},{"name":"GenerateMapping","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["id","model"]},{"name":"Lookup","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id"],"parameters":["source","name","target"]},{"name":"AddASource","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["id","model"]},{"name":"LookUpByMasterName","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["id"],"parameters":["name","source"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"title\":\"SpaceMapping\",\"description\":\"This keeps a mapping of locations (spaces) in different systems like condeco , officernd , cognipoint, etc\",\"parameters\":[{\"id\":\"masterSource\",\"label\":\"Master Space Provider\",\"type\":\"model\",\"subtype\":\"space-provider\"}],\"tags\":[\"location\",\"mapping,\",\"room\",\"mapping,\",\"space\",\"mapping\"],\"capabilities\":[\"space-mapping-provider\"],\"onSave\":\"\"}","Icon":"","ApiRoutes":[],"JSModules":[],"ModelCollections":[{"Key":"1018","MapKey":"14","GUID":"b5275df6-95e8-4dad-c532-79f8dbb22142","Attributes":"[{\"name\":\"name\"},{\"name\":\"id\"},{\"name\":\"description\"},{\"name\":\"capacity\"},{\"name\":\"location\"},{\"name\":\"source\"}]","Name":"rooms"},{"Key":"1019","MapKey":"14","GUID":"a30295b7-a46f-4f8b-9bc7-68c14beec48b","Attributes":"[{\"name\":\"id\"},{\"name\":\"model\"}]","Name":"sources"}]}]}