{"version":"2.0","models":[{"Key":"14","Name":"Public Transport Victoria ","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"CallAction","type":"callaction","id":"376f8217-49de-4778-bf5c-68553b7a9eb7","position":{"left":1689,"top":316},"surface":"FillAllStops","connections":{"inputs":[{"source":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:output:latitude","target":"376f8217-49de-4778-bf5c-68553b7a9eb7:input:latitude"},{"source":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:output:longitude","target":"376f8217-49de-4778-bf5c-68553b7a9eb7:input:longitude"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"FillNearbyStops","modelName":"Public Transport Victoria "},{"title":"Action","type":"actionstart","id":"7e53a974-75a0-4c87-adcc-894b73d6036a","position":{"left":78,"top":129},"surface":"DeparturesFromStop","connections":{"inputs":[],"outputs":[{"source":"7e53a974-75a0-4c87-adcc-894b73d6036a:output:RouteType","target":"01d3243b-afcf-4fe2-f110-0b855177b7ab:input:RouteType"},{"source":"7e53a974-75a0-4c87-adcc-894b73d6036a:output:StopId","target":"01d3243b-afcf-4fe2-f110-0b855177b7ab:input:StopId"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"RouteType","type":"","label":"RouteType","description":"","documentation":"","example":"","dataType":""},{"id":"StopId","type":"","label":"StopId","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeparturesFromStop","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"80506def-dd6b-48a8-87d2-9cd2f6dfeaf9","position":{"left":1008,"top":264},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:true","target":"80506def-dd6b-48a8-87d2-9cd2f6dfeaf9:input:trigger"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"ok","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"status"},{"title":"Repeat Action","type":"repeataction","id":"b604c392-d19a-4f05-ef33-f4eda3a745a1","position":{"left":916,"top":144},"surface":"FillAllStops","connections":{"inputs":[{"source":"d2faa3bc-54b6-44d7-843a-76c29a7ea5c8:output:output","target":"b604c392-d19a-4f05-ef33-f4eda3a745a1:input:list"}],"outputs":[{"source":"b604c392-d19a-4f05-ef33-f4eda3a745a1:output:action","target":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:input:__actionlink__"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"StopsOnRoute","type":"callwebservice:PTV - Public Transport Victoria:StopsOnRoute","id":"44cde23b-734e-46e9-a448-e475818e251b","position":{"left":321,"top":98},"surface":"StopsOnRoute","connections":{"inputs":[{"source":"61c9d722-5a10-4926-c241-24f3631cb4ee:output:RouteId","target":"44cde23b-734e-46e9-a448-e475818e251b:input:RouteId"},{"source":"61c9d722-5a10-4926-c241-24f3631cb4ee:output:RouteType","target":"44cde23b-734e-46e9-a448-e475818e251b:input:RouteType"}],"outputs":[{"source":"44cde23b-734e-46e9-a448-e475818e251b:output:output","target":"9a9f5fe4-e7d5-4af0-ef7a-5b6fc08c1d16:input:input"}]},"inputValues":[{"id":"GeopathUtc","type":"","label":"GeopathUtc","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"DirectionId","type":"","label":"DirectionId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"IncludeGeopath","type":"","label":"IncludeGeopath","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopDisruptions","type":"","label":"StopDisruptions","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteId","type":"","label":"RouteId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteType","type":"","label":"RouteType","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Lucy.5Minutes","type":"eventstart","id":"4c00835d-669e-489e-b3bf-c2842177998a","position":{"left":60,"top":60},"surface":"Lucy.5Minutes","connections":{"inputs":[],"outputs":[{"source":"4c00835d-669e-489e-b3bf-c2842177998a:output:Triggered","target":"33da2c3d-11ad-4a90-c502-666eea8242b0:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"Triggered","type":"","label":"Triggered","description":"","documentation":"","example":"","dataType":""}],"canOverrideCredentials":false,"eventData":{},"parameters":{"Triggered":"Set to 1 always"},"eventDefinition":null,"static":true,"correlations":[],"debug":false,"eventID":"Lucy.5Minutes","initiate":false,"docs":"","eventConfiguration":null,"eventTitle":"Lucy.5Minutes"},{"title":"Replace one document","type":"modelcollections:replaceone","id":"7ca2b60d-27ab-4875-fa27-f0c93dabead2","position":{"left":1565,"top":59},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:latitude","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:latitude"},{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:longitude","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:longitude"},{"source":"e07068bf-afbb-45d3-d92e-625099b0d8aa:output:data","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:stops"}],"outputs":[]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"stops","type":"","label":"stops","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"5f968e57-038c-4177-83ee-2aa48275b2ae","configuration":"[{\"IsEither\":false,\"Conditions\":[{\"Attribute\":\"latitude\",\"Operator\":\"eq\",\"Value\":\"latitude\",\"IsPin\":true},{\"Attribute\":\"longitude\",\"Operator\":\"eq\",\"Value\":\"longitude\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":true,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"30cec9a9-2f8b-46b0-ce16-82dc554cfcb1","position":{"left":181,"top":107},"surface":"GetNearbyStops","connections":{"inputs":[],"outputs":[{"source":"30cec9a9-2f8b-46b0-ce16-82dc554cfcb1:output:latitude","target":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:input:latitude"},{"source":"30cec9a9-2f8b-46b0-ce16-82dc554cfcb1:output:longitude","target":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:input:longitude"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"latitude","type":"","label":"latitude"},{"id":"longitude","type":"","label":"longitude"}],"actionName":"GetNearbyStops","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Action","type":"actionstart","id":"10288d1f-eccb-405e-c930-36236d023228","position":{"left":87,"top":112},"surface":"DeparturesForRoute","connections":{"inputs":[],"outputs":[{"source":"10288d1f-eccb-405e-c930-36236d023228:output:StopId","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:StopId"},{"source":"10288d1f-eccb-405e-c930-36236d023228:output:RouteId","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:RouteId"},{"source":"10288d1f-eccb-405e-c930-36236d023228:output:RouteType","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:RouteType"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"RouteType","type":"","label":"RouteType","description":"","documentation":"","example":"","dataType":""},{"id":"StopId","type":"","label":"StopId","description":"","documentation":"","example":"","dataType":""},{"id":"RouteId","type":"","label":"RouteId","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeparturesForRoute","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"61e6a425-9155-42b5-ed19-26206ca2d5c0","position":{"left":883,"top":482},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"61e6a425-9155-42b5-ed19-26206ca2d5c0:input:trigger"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"stops"},{"title":"Find all documents","type":"modelcollections:findall","id":"d2faa3bc-54b6-44d7-843a-76c29a7ea5c8","position":{"left":533,"top":135},"surface":"FillAllStops","connections":{"inputs":[{"source":"8fa0c4b8-3922-4ab9-f127-19880afcea15:output:output","target":"d2faa3bc-54b6-44d7-843a-76c29a7ea5c8:input:trigger"}],"outputs":[{"source":"d2faa3bc-54b6-44d7-843a-76c29a7ea5c8:output:output","target":"b604c392-d19a-4f05-ef33-f4eda3a745a1:input:list"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"5f968e57-038c-4177-83ee-2aa48275b2ae","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Output","type":"actionoutput","id":"e10ff49d-68f7-456a-aff1-0eb636d80c41","position":{"left":573,"top":164},"surface":"RouteById","connections":{"inputs":[{"source":"d1ad664b-7e21-4a4b-dd5f-2a885fea6af8:output:output","target":"e10ff49d-68f7-456a-aff1-0eb636d80c41:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Insert one document","type":"modelcollections:insertone","id":"d84be1bb-3c1a-4639-9d03-6169a704353e","position":{"left":593,"top":774},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"d84be1bb-3c1a-4639-9d03-6169a704353e:input:trigger"},{"source":"cdf435ad-e1db-4d0f-9e1b-30a8a93a1569:output:output","target":"d84be1bb-3c1a-4639-9d03-6169a704353e:input:stops"}],"outputs":[{"source":"d84be1bb-3c1a-4639-9d03-6169a704353e:output:output","target":"a0e134ab-b83a-466f-f13d-eb9434f09927:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"#{input.latitude}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"#{input.longitude}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"stops","type":"","label":"stops","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"5f968e57-038c-4177-83ee-2aa48275b2ae","configuration":"[]","UpdateAsAttributes":true,"ReceiveIndividualFields":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"a5521126-7efe-49de-85d9-3c9322a813d9","position":{"left":74,"top":141},"surface":"Routes","connections":{"inputs":[],"outputs":[{"source":"a5521126-7efe-49de-85d9-3c9322a813d9:output:output","target":"e85baf0f-77c8-439c-8b54-c4f74e0d7558:input:AccountName"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"Routes","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"2a6901ac-2d49-418a-f553-1200bebcb800","position":{"left":563,"top":160},"surface":"Routes","connections":{"inputs":[{"source":"e85baf0f-77c8-439c-8b54-c4f74e0d7558:output:output","target":"2a6901ac-2d49-418a-f553-1200bebcb800:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Output","type":"actionoutput","id":"09dca874-763d-4c91-e6cb-fd33808d6722","position":{"left":611,"top":183},"surface":"StopById","connections":{"inputs":[{"source":"122630a9-37c7-4284-e929-904ad628899a:output:output","target":"09dca874-763d-4c91-e6cb-fd33808d6722:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"8fa0c4b8-3922-4ab9-f127-19880afcea15","position":{"left":181,"top":168},"surface":"FillAllStops","connections":{"inputs":[],"outputs":[{"source":"8fa0c4b8-3922-4ab9-f127-19880afcea15:output:output","target":"d2faa3bc-54b6-44d7-843a-76c29a7ea5c8:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"FillAllStops","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Find one document","type":"modelcollections:findone","id":"1f4e749d-1760-4538-c1bd-515ae1ae4d59","position":{"left":511,"top":108},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"30cec9a9-2f8b-46b0-ce16-82dc554cfcb1:output:latitude","target":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:input:latitude"},{"source":"30cec9a9-2f8b-46b0-ce16-82dc554cfcb1:output:longitude","target":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:input:longitude"}],"outputs":[{"source":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:output:stops","target":"466e65ab-487d-45e4-8726-c6d95ea89f3f:input:input1"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"latitude","type":"","label":"latitude","description":"","documentation":"","example":"","dataType":""},{"id":"longitude","type":"","label":"longitude","description":"","documentation":"","example":"","dataType":""},{"id":"stops","type":"","label":"stops","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"5f968e57-038c-4177-83ee-2aa48275b2ae","configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"latitude\",\"Operator\":\"eq\",\"Value\":\"latitude\",\"IsPin\":true},{\"Attribute\":\"longitude\",\"Operator\":\"eq\",\"Value\":\"longitude\",\"IsPin\":true}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":true,"TakeFilterFromPin":false,"timeout":5000},{"title":"RouteById","type":"callwebservice:PTV - Public Transport Victoria:RouteById","id":"d1ad664b-7e21-4a4b-dd5f-2a885fea6af8","position":{"left":331,"top":134},"surface":"RouteById","connections":{"inputs":[{"source":"eab9136f-1cf0-4b84-ff44-55e2fd5f7d74:output:RouteId","target":"d1ad664b-7e21-4a4b-dd5f-2a885fea6af8:input:RouteId"}],"outputs":[{"source":"d1ad664b-7e21-4a4b-dd5f-2a885fea6af8:output:output","target":"e10ff49d-68f7-456a-aff1-0eb636d80c41:input:input"}]},"inputValues":[{"id":"RouteId","type":"","label":"RouteId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"GeopathUtc","type":"","label":"GeopathUtc","value":"true","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"IncludeGeopath","type":"","label":"IncludeGeopath","value":"true","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"18c27870-5784-43eb-8748-d56001049e28","position":{"left":603,"top":162},"surface":"DeparturesForRoute","connections":{"inputs":[{"source":"dd3b3e63-8951-490e-8d50-aeb839c6a895:output:output","target":"18c27870-5784-43eb-8748-d56001049e28:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"DeparturesFromStop","type":"callwebservice:PTV - Public Transport Victoria:DeparturesFromStop","id":"01d3243b-afcf-4fe2-f110-0b855177b7ab","position":{"left":336,"top":135},"surface":"DeparturesFromStop","connections":{"inputs":[{"source":"7e53a974-75a0-4c87-adcc-894b73d6036a:output:RouteType","target":"01d3243b-afcf-4fe2-f110-0b855177b7ab:input:RouteType"},{"source":"7e53a974-75a0-4c87-adcc-894b73d6036a:output:StopId","target":"01d3243b-afcf-4fe2-f110-0b855177b7ab:input:StopId"}],"outputs":[{"source":"01d3243b-afcf-4fe2-f110-0b855177b7ab:output:output","target":"0b883947-5d4b-41b7-ad9a-a2a570d1ff22:input:input"}]},"inputValues":[{"id":"StopId","type":"","label":"StopId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteType","type":"","label":"RouteType","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"max","type":"","label":"max","value":"3","description":"","documentation":"","transformation":"","disablelog":""},{"id":"IncludeCancelled","type":"","label":"IncludeCancelled","value":"true","description":"","documentation":"","transformation":"","disablelog":""},{"id":"IncludeGeopath","type":"","label":"IncludeGeopath","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"LookBackwards","type":"","label":"LookBackwards","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"DateUtc","type":"","label":"DateUtc","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"PlatformNumbers","type":"","label":"PlatformNumbers","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"DirectionId","type":"","label":"DirectionId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"gtfs","type":"","label":"gtfs","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Expand","type":"","label":"Expand","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"DeparturesForRoute","type":"callwebservice:PTV - Public Transport Victoria:DeparturesForRoute","id":"dd3b3e63-8951-490e-8d50-aeb839c6a895","position":{"left":362,"top":131},"surface":"DeparturesForRoute","connections":{"inputs":[{"source":"10288d1f-eccb-405e-c930-36236d023228:output:StopId","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:StopId"},{"source":"10288d1f-eccb-405e-c930-36236d023228:output:RouteId","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:RouteId"},{"source":"10288d1f-eccb-405e-c930-36236d023228:output:RouteType","target":"dd3b3e63-8951-490e-8d50-aeb839c6a895:input:RouteType"}],"outputs":[{"source":"dd3b3e63-8951-490e-8d50-aeb839c6a895:output:output","target":"18c27870-5784-43eb-8748-d56001049e28:input:input"}]},"inputValues":[{"id":"StopId","type":"","label":"StopId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteId","type":"","label":"RouteId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteType","type":"","label":"RouteType","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"max","type":"","label":"max","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"IncludeCancelled","type":"","label":"IncludeCancelled","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"IncludeGeopath","type":"","label":"IncludeGeopath","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"LookBackwards","type":"","label":"LookBackwards","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"DateUtc","type":"","label":"DateUtc","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"DirectionId","type":"","label":"DirectionId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"gtfs","type":"","label":"gtfs","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Expand","type":"","label":"Expand","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Action","type":"actionstart","id":"eab9136f-1cf0-4b84-ff44-55e2fd5f7d74","position":{"left":78,"top":137},"surface":"RouteById","connections":{"inputs":[],"outputs":[{"source":"eab9136f-1cf0-4b84-ff44-55e2fd5f7d74:output:RouteId","target":"d1ad664b-7e21-4a4b-dd5f-2a885fea6af8:input:RouteId"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"RouteId","type":"","label":"RouteId","description":"","documentation":"","example":"","dataType":""}],"actionName":"RouteById","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"4f52f723-cace-49c0-d336-5949ce2fa6cb","position":{"left":957,"top":128},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:true","target":"4f52f723-cace-49c0-d336-5949ce2fa6cb:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"stops"},{"title":"Output","type":"actionoutput","id":"5be66e2a-9c29-4126-dce5-ad6bb1a227d3","position":{"left":1017,"top":573},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"5be66e2a-9c29-4126-dce5-ad6bb1a227d3:input:trigger"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"registering","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"status"},{"title":"CallAction","type":"callaction","id":"33da2c3d-11ad-4a90-c502-666eea8242b0","position":{"left":400,"top":74},"surface":"Lucy.5Minutes","connections":{"inputs":[{"source":"4c00835d-669e-489e-b3bf-c2842177998a:output:Triggered","target":"33da2c3d-11ad-4a90-c502-666eea8242b0:input:trigger"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"FillAllStops","modelName":"Public Transport Victoria "},{"title":"CallAction","type":"callaction","id":"a0e134ab-b83a-466f-f13d-eb9434f09927","position":{"left":949,"top":784},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"d84be1bb-3c1a-4639-9d03-6169a704353e:output:output","target":"a0e134ab-b83a-466f-f13d-eb9434f09927:input:trigger"}],"outputs":[]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"#{input.latitude}","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"#{input.longitude}","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"FillNearbyStops","modelName":"Public Transport Victoria "},{"title":"Action","type":"actionstart","id":"61c9d722-5a10-4926-c241-24f3631cb4ee","position":{"left":66,"top":120},"surface":"StopsOnRoute","connections":{"inputs":[],"outputs":[{"source":"61c9d722-5a10-4926-c241-24f3631cb4ee:output:RouteId","target":"44cde23b-734e-46e9-a448-e475818e251b:input:RouteId"},{"source":"61c9d722-5a10-4926-c241-24f3631cb4ee:output:RouteType","target":"44cde23b-734e-46e9-a448-e475818e251b:input:RouteType"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"RouteId","type":"","label":"RouteId","description":"","documentation":"","example":"","dataType":""},{"id":"RouteType","type":"","label":"RouteType","description":"","documentation":"","example":"","dataType":""}],"actionName":"StopsOnRoute","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"ES6Javascript","type":"es6javascript","id":"72575b4b-0e2a-4cee-d9e2-327359bda17c","position":{"left":1040,"top":366},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:output:output","target":"72575b4b-0e2a-4cee-d9e2-327359bda17c:input:stops"}],"outputs":[{"source":"72575b4b-0e2a-4cee-d9e2-327359bda17c:output:stopRoutes","target":"e07068bf-afbb-45d3-d92e-625099b0d8aa:input:stops"},{"source":"72575b4b-0e2a-4cee-d9e2-327359bda17c:output:routes","target":"e07068bf-afbb-45d3-d92e-625099b0d8aa:input:routes"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"stops","type":"","label":"stops","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"stopRoutes","type":"","label":"stopRoutes","description":"","documentation":"","example":"","dataType":""},{"id":"routes","type":"","label":"routes","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {stops} = JSON.parse(runtime.inputs().stops);\nlet stopData = [];\nlet stopMap = {};\nlet routeData = {};\nfor(let stop of stops) {\n    let {stop_id,stop_name,route_type,routes} = stop;\n    stopData.push({id:stop_id,name:stop_name,routeType:route_type});\n    for(let route of routes) {\n        let {route_id,route_name,route_number} = route;\n        routeData[route_id] = {id:route_id,name:route_name,num:route_number};\n    }\n}\n\nruntime.done({stopRoutes:stopData,routes:routeData});","timeoutMilliseconds":5000},{"title":"Queue","type":"queue","id":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f","position":{"left":320,"top":100},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"466fabed-b948-48dd-f683-ab08a19dd8f4:output:longitude","target":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:input:longitude"},{"source":"466fabed-b948-48dd-f683-ab08a19dd8f4:output:latitude","target":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:input:latitude"}],"outputs":[{"source":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:output:output","target":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:input:__actionlink__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"actionlink","label":"Output","description":"","documentation":"","example":"","dataType":""},{"id":"queueid","type":"","label":"Queue Id","description":"","documentation":"","example":"","dataType":""}],"queue-name":"transportqueue","retry-count":3,"retry-immediately":false,"retry-in":5000,"multiple-actors":false,"actor-count":1},{"title":"StopById","type":"callwebservice:PTV - Public Transport Victoria:StopById","id":"122630a9-37c7-4284-e929-904ad628899a","position":{"left":360,"top":104},"surface":"StopById","connections":{"inputs":[{"source":"2a9b3ffb-9169-4eeb-a504-2de346a4eb44:output:StopId","target":"122630a9-37c7-4284-e929-904ad628899a:input:StopId"},{"source":"2a9b3ffb-9169-4eeb-a504-2de346a4eb44:output:RouteType","target":"122630a9-37c7-4284-e929-904ad628899a:input:RouteType"}],"outputs":[{"source":"122630a9-37c7-4284-e929-904ad628899a:output:output","target":"09dca874-763d-4c91-e6cb-fd33808d6722:input:input"}]},"inputValues":[{"id":"StopId","type":"","label":"StopId","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"gtfs","type":"","label":"gtfs","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopContact","type":"","label":"StopContact","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopAccessibility","type":"","label":"StopAccessibility","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopDisruptions","type":"","label":"StopDisruptions","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopAmenities","type":"","label":"StopAmenities","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopTicket","type":"","label":"StopTicket","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopLocation","type":"","label":"StopLocation","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"StopStaffing","type":"","label":"StopStaffing","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteType","type":"","label":"RouteType","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Exists","type":"exists","id":"466e65ab-487d-45e4-8726-c6d95ea89f3f","position":{"left":302,"top":447},"surface":"GetNearbyStops","connections":{"inputs":[{"source":"1f4e749d-1760-4538-c1bd-515ae1ae4d59:output:stops","target":"466e65ab-487d-45e4-8726-c6d95ea89f3f:input:input1"}],"outputs":[{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"d84be1bb-3c1a-4639-9d03-6169a704353e:input:trigger"},{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:true","target":"4f52f723-cace-49c0-d336-5949ce2fa6cb:input:input"},{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:true","target":"80506def-dd6b-48a8-87d2-9cd2f6dfeaf9:input:trigger"},{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"5be66e2a-9c29-4126-dce5-ad6bb1a227d3:input:trigger"},{"source":"466e65ab-487d-45e4-8726-c6d95ea89f3f:output:false","target":"61e6a425-9155-42b5-ed19-26206ca2d5c0:input:trigger"}]},"inputValues":[{"id":"input1","type":"","label":"Input 1","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"true","type":"","label":"True","description":"","documentation":"","example":"","dataType":""},{"id":"false","type":"","label":"False","description":"","documentation":"","example":"","dataType":""}]},{"title":"Action","type":"linkedactionstart","id":"c20d4abb-6abd-4102-b33d-84e3c2b3981a","position":{"left":554,"top":120},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:output:output","target":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:input:__actionlink__"}],"outputs":[{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:latitude","target":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:input:latitude"},{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:longitude","target":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:input:longitude"},{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:latitude","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:latitude"},{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:longitude","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:longitude"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"latitude","type":"","label":"latitude","description":"","documentation":""},{"id":"longitude","type":"","label":"longitude","description":"","documentation":""}],"actionName":"","initiate":false,"published":false,"debug":true,"roles":[],"static":true},{"title":"Output","type":"actionoutput","id":"0b883947-5d4b-41b7-ad9a-a2a570d1ff22","position":{"left":581,"top":169},"surface":"DeparturesFromStop","connections":{"inputs":[{"source":"01d3243b-afcf-4fe2-f110-0b855177b7ab:output:output","target":"0b883947-5d4b-41b7-ad9a-a2a570d1ff22:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"departures"},{"title":"Action","type":"linkedactionstart","id":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3","position":{"left":1216,"top":94},"surface":"FillAllStops","connections":{"inputs":[{"source":"b604c392-d19a-4f05-ef33-f4eda3a745a1:output:action","target":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:input:__actionlink__"}],"outputs":[{"source":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:output:latitude","target":"376f8217-49de-4778-bf5c-68553b7a9eb7:input:latitude"},{"source":"16275e5d-6c29-4e7e-a1c0-0f94168da4b3:output:longitude","target":"376f8217-49de-4778-bf5c-68553b7a9eb7:input:longitude"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"latitude","type":"","label":"latitude","description":"","documentation":"","example":"","dataType":""},{"id":"longitude","type":"","label":"longitude","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":false,"roles":[],"static":true},{"title":"Routes","type":"callwebservice:PTV - Public Transport Victoria:Routes","id":"e85baf0f-77c8-439c-8b54-c4f74e0d7558","position":{"left":328,"top":145},"surface":"Routes","connections":{"inputs":[{"source":"a5521126-7efe-49de-85d9-3c9322a813d9:output:output","target":"e85baf0f-77c8-439c-8b54-c4f74e0d7558:input:AccountName"}],"outputs":[{"source":"e85baf0f-77c8-439c-8b54-c4f74e0d7558:output:output","target":"2a6901ac-2d49-418a-f553-1200bebcb800:input:input"}]},"inputValues":[{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteTypes","type":"","label":"RouteTypes","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"RouteName","type":"","label":"RouteName","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Action","type":"actionstart","id":"466fabed-b948-48dd-f683-ab08a19dd8f4","position":{"left":100,"top":100},"surface":"FillNearbyStops","connections":{"inputs":[],"outputs":[{"source":"466fabed-b948-48dd-f683-ab08a19dd8f4:output:longitude","target":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:input:longitude"},{"source":"466fabed-b948-48dd-f683-ab08a19dd8f4:output:latitude","target":"f42ade07-7e2b-4743-f7a0-00c988bc6a2f:input:latitude"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"latitude","type":"","label":"latitude"},{"id":"longitude","type":"","label":"longitude"}],"actionName":"FillNearbyStops","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"StopsNearLocation","type":"callwebservice:PTV - Public Transport Victoria:StopsNearLocation","id":"0cc87323-ef04-4bb6-9936-701ed6b3ade9","position":{"left":818,"top":313},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:latitude","target":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:input:latitude"},{"source":"c20d4abb-6abd-4102-b33d-84e3c2b3981a:output:longitude","target":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:input:longitude"}],"outputs":[{"source":"0cc87323-ef04-4bb6-9936-701ed6b3ade9:output:output","target":"72575b4b-0e2a-4cee-d9e2-327359bda17c:input:stops"}]},"inputValues":[{"id":"StopDisruptions","type":"","label":"StopDisruptions","value":"true","description":"","documentation":"","transformation":"","disablelog":""},{"id":"longitude","type":"","label":"longitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"latitude","type":"","label":"latitude","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Distance","type":"","label":"Distance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"Max","type":"","label":"Max","value":"100","description":"","documentation":"","transformation":"","disablelog":""},{"id":"AccountName","type":"text","label":"Account","value":"ms","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput","id":"9a9f5fe4-e7d5-4af0-ef7a-5b6fc08c1d16","position":{"left":571,"top":146},"surface":"StopsOnRoute","connections":{"inputs":[{"source":"44cde23b-734e-46e9-a448-e475818e251b:output:output","target":"9a9f5fe4-e7d5-4af0-ef7a-5b6fc08c1d16:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"2a9b3ffb-9169-4eeb-a504-2de346a4eb44","position":{"left":88,"top":144},"surface":"StopById","connections":{"inputs":[],"outputs":[{"source":"2a9b3ffb-9169-4eeb-a504-2de346a4eb44:output:StopId","target":"122630a9-37c7-4284-e929-904ad628899a:input:StopId"},{"source":"2a9b3ffb-9169-4eeb-a504-2de346a4eb44:output:RouteType","target":"122630a9-37c7-4284-e929-904ad628899a:input:RouteType"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"StopId","type":"","label":"StopId","description":"","documentation":"","example":"","dataType":""},{"id":"RouteType","type":"","label":"RouteType","description":"","documentation":"","example":"","dataType":""}],"actionName":"StopById","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Make JSON Array","type":"jsonarray","id":"cdf435ad-e1db-4d0f-9e1b-30a8a93a1569","position":{"left":133,"top":849},"surface":"GetNearbyStops","connections":{"inputs":[],"outputs":[{"source":"cdf435ad-e1db-4d0f-9e1b-30a8a93a1569:output:output","target":"d84be1bb-3c1a-4639-9d03-6169a704353e:input:stops"}]},"inputValues":[{"id":"list","type":"","label":"JSON List","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output JSON List","description":"","documentation":"","example":"","dataType":""}]},{"title":"ES6Javascript","type":"es6javascript","id":"e07068bf-afbb-45d3-d92e-625099b0d8aa","position":{"left":1306,"top":310},"surface":"FillNearbyStops","connections":{"inputs":[{"source":"72575b4b-0e2a-4cee-d9e2-327359bda17c:output:stopRoutes","target":"e07068bf-afbb-45d3-d92e-625099b0d8aa:input:stops"},{"source":"72575b4b-0e2a-4cee-d9e2-327359bda17c:output:routes","target":"e07068bf-afbb-45d3-d92e-625099b0d8aa:input:routes"}],"outputs":[{"source":"e07068bf-afbb-45d3-d92e-625099b0d8aa:output:data","target":"7ca2b60d-27ab-4875-fa27-f0c93dabead2:input:stops"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"stops","type":"","label":"stops","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"routes","type":"","label":"routes","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"data","type":"","label":"data","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {stops,routes} = runtime.inputs();\nlet model = lucy.model('Public Transport Victoria ');\n\nasync function getDepartures(stop,stopName,routeType) {\n    let items = [];\n\n    let data = await model.executeAction('DeparturesFromStop',{StopId:stop,RouteType:routeType});\n   \n   \n    let departures = JSON.parse(data.departures).departures;\n    for(let dep of departures) {\n        let d = dep.scheduled_departure_utc;\n        let routeId = dep.route_id;\n        if (!routes[routeId]) continue;\n        let item = {stop:stopName,route:routes[routeId].name,departure:d};\n        items.push(item);\n    }\n    return items;\n}\nasync function main() {\n    let items = [];\n    let errors = [];\n    for(let stop of stops) {\n        let {id,name,routeType} = stop;\n        try {\n            \n            let m = await getDepartures(id,name,routeType);\n           \n             for(var k of m) items.push(k);\n        } catch(e) {\n            errors.push(e);\n          \n            continue;\n        }\n      \n\n    }\n    //if (errors.length>0) throw errors.join(',');\n    items.sort((a,b) => Number(new Date(a.departure)) - Number(new Date(b.departure)));\n    return items;\n}\nmain().then(x => runtime.done({data:x})).catch(_ => runtime.error(_));","timeoutMilliseconds":5000}],"position":{"top":0,"left":0}},"sources":[{"name":"FillNearbyStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["latitude","longitude"]},{"name":"DeparturesForRoute","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteType","StopId","RouteId"]},{"name":"Routes","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"FillAllStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"RouteById","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteId"]},{"name":"StopsOnRoute","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteId","RouteType"]},{"name":"StopById","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["StopId","RouteType"]},{"name":"DeparturesFromStop","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["departures"],"parameters":["RouteType","StopId"]},{"name":"GetNearbyStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["stops","status","status","stops"],"parameters":["latitude","longitude"]}],"actions":[{"name":"FillNearbyStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["latitude","longitude"]},{"name":"DeparturesForRoute","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteType","StopId","RouteId"]},{"name":"Routes","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"FillAllStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"RouteById","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteId"]},{"name":"StopsOnRoute","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["RouteId","RouteType"]},{"name":"StopById","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["StopId","RouteType"]},{"name":"DeparturesFromStop","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["departures"],"parameters":["RouteType","StopId"]},{"name":"GetNearbyStops","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["stops","status","status","stops"],"parameters":["latitude","longitude"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"title\":\"Victoria Public Transport\",\"description\":\"Uses the Victoria Public Transport API for returning data about transport\",\"tags\":[],\"capabilities\":[\"transportation-info-provider\"]}","ApiRoutes":[],"JSModules":[],"ModelCollections":[{"Key":"159","MapKey":"14","GUID":"5f968e57-038c-4177-83ee-2aa48275b2ae","Attributes":"[{\"name\":\"latitude\"},{\"name\":\"longitude\"},{\"name\":\"stops\"}]","Name":"cache"}]}]}